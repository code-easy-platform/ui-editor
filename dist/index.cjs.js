"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("react"),se=require("react-use-drag-and-drop"),y=require("react-observing"),Gr=require("uuid"),qt=require("react-dom");var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dr={exports:{}},Ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir;function Jt(){if(Ir)return Ae;Ir=1;var e=f,r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,d,v){var a,h={},m=null,l=null;v!==void 0&&(m=""+v),d.key!==void 0&&(m=""+d.key),d.ref!==void 0&&(l=d.ref);for(a in d)n.call(d,a)&&!o.hasOwnProperty(a)&&(h[a]=d[a]);if(u&&u.defaultProps)for(a in d=u.defaultProps,d)h[a]===void 0&&(h[a]=d[a]);return{$$typeof:r,type:u,key:m,ref:l,props:h,_owner:i.current}}return Ae.Fragment=t,Ae.jsx=s,Ae.jsxs=s,Ae}var He={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vr;function Xt(){return Vr||(Vr=1,process.env.NODE_ENV!=="production"&&function(){var e=f,r=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),a=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),l=Symbol.for("react.offscreen"),p=Symbol.iterator,b="@@iterator";function R(c){if(c===null||typeof c!="object")return null;var E=p&&c[p]||c[b];return typeof E=="function"?E:null}var w=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(c){{for(var E=arguments.length,j=new Array(E>1?E-1:0),z=1;z<E;z++)j[z-1]=arguments[z];D("error",c,j)}}function D(c,E,j){{var z=w.ReactDebugCurrentFrame,re=z.getStackAddendum();re!==""&&(E+="%s",j=j.concat([re]));var ae=j.map(function(Q){return String(Q)});ae.unshift("Warning: "+E),Function.prototype.apply.call(console[c],console,ae)}}var S=!1,g=!1,L=!1,M=!1,T=!1,k;k=Symbol.for("react.module.reference");function B(c){return!!(typeof c=="string"||typeof c=="function"||c===n||c===o||T||c===i||c===v||c===a||M||c===l||S||g||L||typeof c=="object"&&c!==null&&(c.$$typeof===m||c.$$typeof===h||c.$$typeof===s||c.$$typeof===u||c.$$typeof===d||c.$$typeof===k||c.getModuleId!==void 0))}function N(c,E,j){var z=c.displayName;if(z)return z;var re=E.displayName||E.name||"";return re!==""?j+"("+re+")":j}function $(c){return c.displayName||"Context"}function I(c){if(c==null)return null;if(typeof c.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case n:return"Fragment";case t:return"Portal";case o:return"Profiler";case i:return"StrictMode";case v:return"Suspense";case a:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case u:var E=c;return $(E)+".Consumer";case s:var j=c;return $(j._context)+".Provider";case d:return N(c,c.render,"ForwardRef");case h:var z=c.displayName||null;return z!==null?z:I(c.type)||"Memo";case m:{var re=c,ae=re._payload,Q=re._init;try{return I(Q(ae))}catch{return null}}}return null}var F=Object.assign,oe=0,A,V,G,ie,O,P,H;function U(){}U.__reactDisabledLog=!0;function W(){{if(oe===0){A=console.log,V=console.info,G=console.warn,ie=console.error,O=console.group,P=console.groupCollapsed,H=console.groupEnd;var c={configurable:!0,enumerable:!0,value:U,writable:!0};Object.defineProperties(console,{info:c,log:c,warn:c,error:c,group:c,groupCollapsed:c,groupEnd:c})}oe++}}function Z(){{if(oe--,oe===0){var c={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:F({},c,{value:A}),info:F({},c,{value:V}),warn:F({},c,{value:G}),error:F({},c,{value:ie}),group:F({},c,{value:O}),groupCollapsed:F({},c,{value:P}),groupEnd:F({},c,{value:H})})}oe<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Y=w.ReactCurrentDispatcher,q;function K(c,E,j){{if(q===void 0)try{throw Error()}catch(re){var z=re.stack.trim().match(/\n( *(at )?)/);q=z&&z[1]||""}return`
`+q+c}}var ee=!1,J;{var le=typeof WeakMap=="function"?WeakMap:Map;J=new le}function _(c,E){if(!c||ee)return"";{var j=J.get(c);if(j!==void 0)return j}var z;ee=!0;var re=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ae;ae=Y.current,Y.current=null,W();try{if(E){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(fe){z=fe}Reflect.construct(c,[],Q)}else{try{Q.call()}catch(fe){z=fe}c.call(Q.prototype)}}else{try{throw Error()}catch(fe){z=fe}c()}}catch(fe){if(fe&&z&&typeof fe.stack=="string"){for(var X=fe.stack.split(`
`),de=z.stack.split(`
`),ue=X.length-1,ce=de.length-1;ue>=1&&ce>=0&&X[ue]!==de[ce];)ce--;for(;ue>=1&&ce>=0;ue--,ce--)if(X[ue]!==de[ce]){if(ue!==1||ce!==1)do if(ue--,ce--,ce<0||X[ue]!==de[ce]){var ye=`
`+X[ue].replace(" at new "," at ");return c.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",c.displayName)),typeof c=="function"&&J.set(c,ye),ye}while(ue>=1&&ce>=0);break}}}finally{ee=!1,Y.current=ae,Z(),Error.prepareStackTrace=re}var Ve=c?c.displayName||c.name:"",Re=Ve?K(Ve):"";return typeof c=="function"&&J.set(c,Re),Re}function he(c,E,j){return _(c,!1)}function je(c){var E=c.prototype;return!!(E&&E.isReactComponent)}function Ee(c,E,j){if(c==null)return"";if(typeof c=="function")return _(c,je(c));if(typeof c=="string")return K(c);switch(c){case v:return K("Suspense");case a:return K("SuspenseList")}if(typeof c=="object")switch(c.$$typeof){case d:return he(c.render);case h:return Ee(c.type,E,j);case m:{var z=c,re=z._payload,ae=z._init;try{return Ee(ae(re),E,j)}catch{}}}return""}var Be=Object.prototype.hasOwnProperty,xr={},Sr=w.ReactDebugCurrentFrame;function We(c){if(c){var E=c._owner,j=Ee(c.type,c._source,E?E.type:null);Sr.setExtraStackFrame(j)}else Sr.setExtraStackFrame(null)}function Et(c,E,j,z,re){{var ae=Function.call.bind(Be);for(var Q in c)if(ae(c,Q)){var X=void 0;try{if(typeof c[Q]!="function"){var de=Error((z||"React class")+": "+j+" type `"+Q+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[Q]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw de.name="Invariant Violation",de}X=c[Q](E,Q,z,j,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ue){X=ue}X&&!(X instanceof Error)&&(We(re),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",z||"React class",j,Q,typeof X),We(null)),X instanceof Error&&!(X.message in xr)&&(xr[X.message]=!0,We(re),C("Failed %s type: %s",j,X.message),We(null))}}}var Rt=Array.isArray;function Ze(c){return Rt(c)}function Dt(c){{var E=typeof Symbol=="function"&&Symbol.toStringTag,j=E&&c[Symbol.toStringTag]||c.constructor.name||"Object";return j}}function Tt(c){try{return Or(c),!1}catch{return!0}}function Or(c){return""+c}function Cr(c){if(Tt(c))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Dt(c)),Or(c)}var Le=w.ReactCurrentOwner,Pt={key:!0,ref:!0,__self:!0,__source:!0},mr,wr,Qe;Qe={};function _t(c){if(Be.call(c,"ref")){var E=Object.getOwnPropertyDescriptor(c,"ref").get;if(E&&E.isReactWarning)return!1}return c.ref!==void 0}function jt(c){if(Be.call(c,"key")){var E=Object.getOwnPropertyDescriptor(c,"key").get;if(E&&E.isReactWarning)return!1}return c.key!==void 0}function It(c,E){if(typeof c.ref=="string"&&Le.current&&E&&Le.current.stateNode!==E){var j=I(Le.current.type);Qe[j]||(C('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',I(Le.current.type),c.ref),Qe[j]=!0)}}function Vt(c,E){{var j=function(){mr||(mr=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",E))};j.isReactWarning=!0,Object.defineProperty(c,"key",{get:j,configurable:!0})}}function Mt(c,E){{var j=function(){wr||(wr=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",E))};j.isReactWarning=!0,Object.defineProperty(c,"ref",{get:j,configurable:!0})}}var kt=function(c,E,j,z,re,ae,Q){var X={$$typeof:r,type:c,key:E,ref:j,props:Q,_owner:ae};return X._store={},Object.defineProperty(X._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(X,"_self",{configurable:!1,enumerable:!1,writable:!1,value:z}),Object.defineProperty(X,"_source",{configurable:!1,enumerable:!1,writable:!1,value:re}),Object.freeze&&(Object.freeze(X.props),Object.freeze(X)),X};function Bt(c,E,j,z,re){{var ae,Q={},X=null,de=null;j!==void 0&&(Cr(j),X=""+j),jt(E)&&(Cr(E.key),X=""+E.key),_t(E)&&(de=E.ref,It(E,re));for(ae in E)Be.call(E,ae)&&!Pt.hasOwnProperty(ae)&&(Q[ae]=E[ae]);if(c&&c.defaultProps){var ue=c.defaultProps;for(ae in ue)Q[ae]===void 0&&(Q[ae]=ue[ae])}if(X||de){var ce=typeof c=="function"?c.displayName||c.name||"Unknown":c;X&&Vt(Q,ce),de&&Mt(Q,ce)}return kt(c,X,de,re,z,Le.current,Q)}}var er=w.ReactCurrentOwner,Er=w.ReactDebugCurrentFrame;function Ie(c){if(c){var E=c._owner,j=Ee(c.type,c._source,E?E.type:null);Er.setExtraStackFrame(j)}else Er.setExtraStackFrame(null)}var rr;rr=!1;function tr(c){return typeof c=="object"&&c!==null&&c.$$typeof===r}function Rr(){{if(er.current){var c=I(er.current.type);if(c)return`

Check the render method of \``+c+"`."}return""}}function Lt(c){return""}var Dr={};function At(c){{var E=Rr();if(!E){var j=typeof c=="string"?c:c.displayName||c.name;j&&(E=`

Check the top-level render call using <`+j+">.")}return E}}function Tr(c,E){{if(!c._store||c._store.validated||c.key!=null)return;c._store.validated=!0;var j=At(E);if(Dr[j])return;Dr[j]=!0;var z="";c&&c._owner&&c._owner!==er.current&&(z=" It was passed a child from "+I(c._owner.type)+"."),Ie(c),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',j,z),Ie(null)}}function Pr(c,E){{if(typeof c!="object")return;if(Ze(c))for(var j=0;j<c.length;j++){var z=c[j];tr(z)&&Tr(z,E)}else if(tr(c))c._store&&(c._store.validated=!0);else if(c){var re=R(c);if(typeof re=="function"&&re!==c.entries)for(var ae=re.call(c),Q;!(Q=ae.next()).done;)tr(Q.value)&&Tr(Q.value,E)}}}function Ht(c){{var E=c.type;if(E==null||typeof E=="string")return;var j;if(typeof E=="function")j=E.propTypes;else if(typeof E=="object"&&(E.$$typeof===d||E.$$typeof===h))j=E.propTypes;else return;if(j){var z=I(E);Et(j,c.props,"prop",z,c)}else if(E.PropTypes!==void 0&&!rr){rr=!0;var re=I(E);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",re||"Unknown")}typeof E.getDefaultProps=="function"&&!E.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function $t(c){{for(var E=Object.keys(c.props),j=0;j<E.length;j++){var z=E[j];if(z!=="children"&&z!=="key"){Ie(c),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",z),Ie(null);break}}c.ref!==null&&(Ie(c),C("Invalid attribute `ref` supplied to `React.Fragment`."),Ie(null))}}var _r={};function jr(c,E,j,z,re,ae){{var Q=B(c);if(!Q){var X="";(c===void 0||typeof c=="object"&&c!==null&&Object.keys(c).length===0)&&(X+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var de=Lt();de?X+=de:X+=Rr();var ue;c===null?ue="null":Ze(c)?ue="array":c!==void 0&&c.$$typeof===r?(ue="<"+(I(c.type)||"Unknown")+" />",X=" Did you accidentally export a JSX literal instead of a component?"):ue=typeof c,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ue,X)}var ce=Bt(c,E,j,re,ae);if(ce==null)return ce;if(Q){var ye=E.children;if(ye!==void 0)if(z)if(Ze(ye)){for(var Ve=0;Ve<ye.length;Ve++)Pr(ye[Ve],c);Object.freeze&&Object.freeze(ye)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Pr(ye,c)}if(Be.call(E,"key")){var Re=I(c),fe=Object.keys(E).filter(function(Nt){return Nt!=="key"}),nr=fe.length>0?"{key: someKey, "+fe.join(": ..., ")+": ...}":"{key: someKey}";if(!_r[Re+nr]){var Yt=fe.length>0?"{"+fe.join(": ..., ")+": ...}":"{}";C(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,nr,Re,Yt,Re),_r[Re+nr]=!0}}return c===n?$t(ce):Ht(ce),ce}}function zt(c,E,j){return jr(c,E,j,!0)}function Ft(c,E,j){return jr(c,E,j,!1)}var Wt=Ft,Ut=zt;He.Fragment=n,He.jsx=Wt,He.jsxs=Ut}()),He}process.env.NODE_ENV==="production"?dr.exports=Jt():dr.exports=Xt();var x=dr.exports;const Kr=f.createContext({});function Zt({children:e,...r}){return x.jsx(Kr.Provider,{value:r,children:e})}const pe=()=>f.useContext(Kr),Jr=f.createContext({}),Qt=({children:e,id:r,onSelect:t})=>{const n=f.useRef({documentHorizontalScroll:y.observe(0),playgroundSize:y.observe(void 0),documentVerticalScroll:y.observe(0),getPosition:y.observe(void 0),parents:y.observe(void 0),element:y.observe(void 0),onSelect:t,id:r});return f.useEffect(()=>{n.current.id=r},[r]),f.useEffect(()=>{n.current.onSelect=t},[t]),x.jsx(Jr.Provider,{value:n.current,children:e})},Te=()=>{const e=f.useContext(Jr),r=f.useCallback(o=>{e.onSelect(o)},[e.id]),t=f.useCallback((o,s,u)=>{y.set(e.getPosition,()=>u),y.set(e.parents,s),y.set(e.element,o)},[e.getPosition]),n=f.useCallback((o,s)=>{y.set(e.documentHorizontalScroll,s),y.set(e.documentVerticalScroll,o)},[e.documentVerticalScroll,e.documentHorizontalScroll]),i=f.useCallback((o,s)=>{y.set(e.playgroundSize,{height:o,width:s})},[e.playgroundSize]);return{select:r,selectedId:e.id,selectedElement:e.element,selectedElementParents:e.parents,updateSelectBar:t,updateSelectBarScroll:n,updateSelectBarPlaygroundSize:i,selectBarGetPosition:e.getPosition,selectBarPlaygroundSize:e.playgroundSize,selectBarDocumentVerticalScroll:e.documentVerticalScroll,selectBarDocumentHorizontalScroll:e.documentHorizontalScroll}},Xr=f.createContext({}),en=({children:e,id:r,onHover:t})=>{const n=f.useRef({documentHorizontalScroll:y.observe(0),playgroundSize:y.observe(void 0),documentVerticalScroll:y.observe(0),getPosition:y.observe(void 0),element:y.observe(void 0),onHover:t,id:r});return f.useEffect(()=>{n.current.id=r},[r]),f.useEffect(()=>{n.current.onHover=t},[t]),x.jsx(Xr.Provider,{value:n.current,children:e})},me=()=>{const e=f.useContext(Xr),r=f.useCallback(o=>{e.id.value!==o&&e.onHover(o)},[e.id]),t=f.useCallback((o,s)=>{y.set(e.getPosition,()=>s),y.set(e.element,o)},[e.getPosition]),n=f.useCallback((o,s)=>{y.set(e.documentHorizontalScroll,s),y.set(e.documentVerticalScroll,o)},[e.documentVerticalScroll,e.documentHorizontalScroll]),i=f.useCallback((o,s)=>{y.set(e.playgroundSize,{height:o,width:s})},[e.playgroundSize]);return{hover:r,hoveredId:e.id,hoveredElement:e.element,updateHoverBar:t,updateHoverBarScroll:n,updateHoverBarPlaygroundSize:i,hoverBarGetPosition:e.getPosition,hoverBarPlaygroundSize:e.playgroundSize,hoverBarDocumentVerticalScroll:e.documentVerticalScroll,hoverBarDocumentHorizontalScroll:e.documentHorizontalScroll}},rn=e=>{let r,t=0;if(!(!e||e.length===0)){do t--,r=e==null?void 0:e.slice(t).at(0);while(!r||!["html","slot-content"].includes(r.type.value));return r}},qe=(e,r)=>{const t=document.createElement("label");return t.style.padding="4px",t.style.paddingTop="2px",t.style.paddingRight="8px",t.style.paddingBottom="2px",t.style.backgroundColor="#3e8ce4",t.style.color="#ffffff",t.style.alignItems="center",t.style.borderRadius="2px",t.style.fontWeight="600",t.style.position="fixed",t.style.fontSize="11px",t.style.display="flex",t.style.height="20px",t.style.zIndex="-100",t.style.width="auto",t.appendChild(new Text(e)),document.body.appendChild(t),t};function tn(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}var Zr={exports:{}};/*! Case - v1.6.2 - 2020-03-24
* Copyright (c) 2020 Nathan Bubna; Licensed MIT, GPL */(function(e){(function(){var r=function(l,p){return p=p||"",l.replace(/(^|-)/g,"$1\\u"+p).replace(/,/g,"\\u"+p)},t=r("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),n="a-z"+r("DF-F6,F8-FF","00"),i="A-Z"+r("C0-D6,D8-DE","00"),o="A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",s=function(l,p,b,R){return l=l||t,p=p||n,b=b||i,R=R||o,{capitalize:new RegExp("(^|["+l+"])(["+p+"])","g"),pascal:new RegExp("(^|["+l+"])+(["+p+b+"])","g"),fill:new RegExp("["+l+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+p+"])","g"),improper:new RegExp("\\b("+R+")\\b","g"),relax:new RegExp("([^"+b+"])(["+b+"]*)(["+b+"])(?=[^"+b+"]|$)","g"),upper:new RegExp("^[^"+p+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+l+"]")}},u=s(),d={re:u,unicodes:r,regexps:s,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(l){return d.up.call(l.charAt(0))+l.slice(1)},decap:function(l){return d.low.call(l.charAt(0))+l.slice(1)},deapostrophe:function(l){return l.replace(u.apostrophe,"")},fill:function(l,p,b){return p!=null&&(l=l.replace(u.fill,function(R,w){return w?p+w:""})),b&&(l=d.deapostrophe(l)),l},prep:function(l,p,b,R){if(l=l==null?"":l+"",!R&&u.upper.test(l)&&(l=d.low.call(l)),!p&&!u.hole.test(l)){var w=d.fill(l," ");u.hole.test(w)&&(l=w)}return!b&&!u.room.test(l)&&(l=l.replace(u.relax,d.relax)),l},relax:function(l,p,b,R){return p+" "+(b?b+" ":"")+R}},v={_:d,of:function(l){for(var p=0,b=d.types.length;p<b;p++)if(v[d.types[p]].apply(v,arguments)===l)return d.types[p]},flip:function(l){return l.replace(/\w/g,function(p){return(p==d.up.call(p)?d.low:d.up).call(p)})},random:function(l){return l.replace(/\w/g,function(p){return(Math.round(Math.random())?d.up:d.low).call(p)})},type:function(l,p){v[l]=p,d.types.push(l)}},a={lower:function(l,p,b){return d.fill(d.low.call(d.prep(l,p)),p,b)},snake:function(l){return v.lower(l,"_",!0)},constant:function(l){return v.upper(l,"_",!0)},camel:function(l){return d.decap(v.pascal(l))},kebab:function(l){return v.lower(l,"-",!0)},upper:function(l,p,b){return d.fill(d.up.call(d.prep(l,p,!1,!0)),p,b)},capital:function(l,p,b){return d.fill(d.prep(l).replace(u.capitalize,function(R,w,C){return w+d.up.call(C)}),p,b)},header:function(l){return v.capital(l,"-",!0)},pascal:function(l){return d.fill(d.prep(l,!1,!0).replace(u.pascal,function(p,b,R){return d.up.call(R)}),"",!0)},title:function(l){return v.capital(l).replace(u.improper,function(p,b,R,w){return R>0&&R<w.lastIndexOf(" ")?d.low.call(p):p})},sentence:function(l,p,b){return l=v.lower(l).replace(u.sentence,function(R,w,C){return w+d.up.call(C)}),p&&p.forEach(function(R){l=l.replace(new RegExp("\\b"+v.lower(R)+"\\b","g"),d.cap)}),b&&b.forEach(function(R){l=l.replace(new RegExp("(\\b"+v.lower(R)+"\\. +)(\\w)"),function(w,C,D){return C+d.low.call(D)})}),l}};a.squish=a.pascal,v.default=v;for(var h in a)v.type(h,a[h]);var m=typeof m=="function"?m:function(){};m(e.exports?e.exports=v:this.Case=v)}).call(Gt)})(Zr);var Qr=Zr.exports;function et(e){return Qr.camel(tn(e))}const Mr=(e,r,t,n,i)=>!(!n.current||e.droppableId!==i||e.draggingId===r.id.value||t.some(u=>e.draggingId===u.id.value)),nn=(e,r,t)=>{if(!t.current)return null;if(r.type.value==="slot-content"&&Array.isArray(r.children.value))return{isOverCurrentStart:!1,isOverCurrentEnd:!1,isOverEnd:!1,isOverStart:!1};const n=["component","slot","text"].includes(r.type.value)?!1:Array.isArray(r.children.value),i=t.current.getBoundingClientRect(),o=n?5:i.height/2,s=e.x-i.x,u=e.y-i.y,d=u>=0&&u<=o,v=u>=i.height-o&&u<=i.height,a=u>=o&&u<=i.height-o,h=s>=0&&s<=o,m=s>=i.width-o&&s<=i.width,l=s>=o&&s<=i.width-o;let p=!1,b=!1,R=!1,w=!1;if(n){const C=v||m||d||h;p=l&&a&&!C,b=l&&a&&!C,R=v||m,w=d||h}else R=(v||m)&&!d,w=(d||h)&&!v;return{isOverCurrentStart:p,isOverCurrentEnd:b,isOverEnd:R,isOverStart:w}},Me=()=>Gr.v4(),on=()=>x.jsx("div",{className:"animate-pulse p-0.5 bg-[#3e8ce4] z-10"}),an=(e,r)=>y.useSelectorValue(({get:t})=>r.map(n=>t(n.id)).includes(t(e.id)),[e,r]),Ge=(e,r)=>y.useSelectorValue(({get:n})=>{const i=[...r].reverse();let o;for(let s=0;s<i.length;s++){const u=i[s];if(n(u.type)==="slot-content"&&(o=!1),n(u.type)==="component")if(o===!1)o=void 0;else return!0}return!!o},[r,e]),sn=({element:e})=>{const r=y.useObserverValue(e.name);return x.jsxs("div",{style:{cursor:"default",userSelect:"none",pointerEvents:"none",outline:"none",border:"2px solid orange",fontFamily:"sans-serif"},children:['This component "',x.jsx("b",{style:{fontWeight:"bold",outline:"none",pointerEvents:"none"},children:r}),'" introduces a infinite loop.']})},be=({value:e,matchWidthValue:r,effect:t},n)=>{const i=y.useSelectorValue(({get:o})=>{if(!e)return!1;const s=o(e);if(!r)return!1;const u=o(r);return s===u},[...n]);f.useEffect(()=>{i&&t()},[i])},un=({element:e,onHoverBar:r,onSelectBar:t,onMouseLeave:n,onMouseOver:i,onSelect:o})=>{const s=f.useRef(null),{selectedId:u}=Te(),{hoveredId:d}=me(),v=y.useObserverValue(e.name);return be({value:d,matchWidthValue:e==null?void 0:e.id,effect:()=>r(e,s.current)},[d,e]),be({value:u,matchWidthValue:e==null?void 0:e.id,effect:()=>t(e,s.current)},[u,e]),x.jsxs("div",{ref:s,onMouseLeave:n,onClick:a=>o(a,e),onMouseOver:a=>i(a,e,s.current),style:{outline:"none",cursor:"default",userSelect:"none",pointerEvents:"all",fontFamily:"sans-serif",border:"2px solid orange"},children:['This component "',x.jsx("b",{style:{fontWeight:"bold",outline:"none",pointerEvents:"none"},children:v}),'" introduces a infinite loop.']})},cn=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v,onDoubleClick:a})=>{const h=f.useRef(null),{onDragStart:m,onDragEnd:l,components:p}=pe(),{selectedId:b}=Te(),{hoveredId:R}=me(),w=y.useObserverValue(e.name),C=y.useObserverValue(e.id),D=y.useSelectorValue(({get:T})=>{const k=T(p).find(B=>T(B.id)===T(e.referenceComponentId));return k?T(k.content):[]},[p,e]);be({value:R,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,h.current)},[R,e]),be({value:b,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,h.current)},[b,e]);const S=f.useMemo(()=>!D||D.length===0?null:D.map(T=>x.jsx(Pe,{element:T,parents:[...r,e]},T.id.value)),[D,r,e]),{isDragging:g,preview:L}=se.useDrag({id:C,element:h,end:()=>l(),data:{element:e,parents:r},start:()=>{m()}},[C,e,r,m,l]);f.useEffect(()=>{L(()=>qe(w),T=>T.remove())},[L,w]);const M=f.useRef({id:Me()});return se.useDrop({element:h,id:M.current.id,drop:(T,k)=>u(T,k,e,r,h,M.current.id),hover:(T,k)=>s(T,k,e,r,h,M.current.id),leave:(T,k)=>o(T,k,e,r,h,M.current.id)},[e,r,u,s,o]),x.jsx("div",{ref:h,onMouseLeave:n,onClick:T=>i(T,e),onDoubleClick:T=>a(T,e),onMouseOver:T=>t(T,e,h.current),style:{cursor:"default",userSelect:"none",pointerEvents:"all",opacity:g?.5:void 0},children:S})},ln=({element:e,parents:r})=>{const{components:t}=pe(),n=y.useSelectorValue(({get:i})=>{const o=i(t).find(s=>i(s.id)===i(e.referenceComponentId));return o?i(o.content):[]},[t,e]);return x.jsx("div",{style:{outline:"none",pointerEvents:"none"},children:n.map(i=>x.jsx(Pe,{element:i,parents:[...r,e]},i.id.value))})},dn=({element:e,parents:r,...t})=>{const n=an(e,r),i=Ge(e,r);return n?i?x.jsx(sn,{element:e}):x.jsx(un,{element:e,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar}):i?x.jsx(ln,{element:e,parents:r}):x.jsx(cn,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onDoubleClick:t.onDoubleClick,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar})},rt=e=>{const{onExpressionToValue:r}=pe(),t=f.useMemo(()=>y.selector(({get:n})=>{const i=n(e.style);if(!i)return{};const o={};return i.forEach(s=>{const u=n(s.name),d=n(s.value);u&&(o[et(u)]=r(d,u,"style",e))}),o}),[e,r,e]);return y.useObserverValue(t)},tt=e=>{const{onExpressionToValue:r}=pe(),t=f.useMemo(()=>y.selector({get({get:n}){const i=n(e.attributes);if(!i)return[{},{}];const o={},s={};return i.forEach(u=>{const d=n(u.name);if(d===void 0||d==="hidden"||d==="style")return;const v=r(n(u.value),d,"attribute",e),a=et(d);switch(a){case"options":s.options=v;break;case"className":o.className=v;break;case"class":o.className=v;break;default:if(d.startsWith("data-")){o[d]=v;return}else o[a]=v;break}}),[o,s]}}),[e,r]);return y.useObserverValue(t)},nt=f.forwardRef(({tag:e,...r},t)=>f.createElement(e,{ref:t,...r})),fn=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v})=>{const a=f.useRef(null),[h,m]=f.useState(!1),[l]=tt(e),p=y.useObserverValue(e.children),b=rt(e),R=y.useObserverValue(e.name),w=y.useObserverValue(e.tag),C=y.useObserverValue(e.id),{onDragStart:D,onDragEnd:S}=pe(),{selectedId:g}=Te(),{hoveredId:L}=me();be({value:L,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,a.current)},[L,e]),be({value:g,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,a.current)},[g,e]),f.useEffect(()=>{m(I=>L.value===C===I?I:!I);const $=L.subscribe(I=>{m(F=>I===C===F?F:!F)});return()=>$.unsubscribe()},[C,L]);const M=f.useMemo(()=>!p||p.length===0?null:p.map($=>x.jsx(Pe,{element:$,parents:[...r,e]},$.id.value)),[p,r,e]),T=f.useMemo(()=>p!==void 0,[p]),{isDragging:k,preview:B}=se.useDrag({id:C,element:a,data:{element:e,parents:r},start:()=>{D()},end:()=>S()},[C,e,r,D,S]);f.useEffect(()=>{B(()=>qe(R),$=>$.remove())},[B,R]);const N=f.useRef({id:Me()});return se.useDrop({element:a,id:N.current.id,drop:($,I)=>u($,I,e,r,a,N.current.id),hover:($,I)=>s($,I,e,r,a,N.current.id),leave:($,I)=>o($,I,e,r,a,N.current.id)},[e,r,u,s,o]),x.jsx(nt,{readOnly:!0,tag:w,ref:a,children:M,onMouseLeave:n,onClick:$=>i($,e),onMouseOver:$=>t($,e,a.current),...l!==void 0?{...l,...h?{disabled:!1}:{}}:{},style:{...b,resize:"none",cursor:"default",userSelect:"none",pointerEvents:"all",opacity:k?.5:typeof b.opacity=="number"?Number(b.opacity):void 0,minWidth:M===null&&T?40:typeof b.minWidth=="number"?Number(b.minWidth):void 0,minHeight:M===null&&T?40:typeof b.minHeight=="number"?Number(b.minHeight):void 0}})},vn=({element:e,parents:r})=>{const[t]=tt(e),n=y.useObserverValue(e.children),i=rt(e),o=y.useObserverValue(e.tag),s=f.useMemo(()=>!n||n.length===0?null:n.map(u=>x.jsx(Pe,{element:u,parents:[...r,e]},u.id.value)),[n,r,e]);return x.jsx(nt,{tag:o,children:s,...t!==void 0?t:{},style:{...i,resize:"none",outline:"none",cursor:"default",userSelect:"none",pointerEvents:"none"}})},pn=({element:e,parents:r,...t})=>Ge(e,r)?x.jsx(vn,{element:e,parents:r}):x.jsx(fn,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar}),hn=(e,r)=>{const{components:t}=pe();return y.useSelectorValue(({get:n})=>{const i=n(t),o=[...r].reverse(),s=o.findIndex(v=>{var m;if(n(v.type)!=="component")return!1;const a=v;return n(e.componentId)===n(a.referenceComponentId)?(m=n(a.slots))==null?void 0:m.some(l=>n(l.referenceSlotId)===n(e.id)):!1});return!o.at(s)||o.slice(s+1).reduce((v,a)=>v!==void 0?v:n(a.type)==="slot-content"?!1:n(a.type)==="component"?!0:v,void 0)?!1:i.some(v=>n(v.id)===n(e.componentId))},[r,e,t])},ot=(e,r)=>{const{onAddSlotContent:t}=pe();return y.useSelectorValue(({get:n})=>{var s;const i=[...r].reverse().filter(u=>n(u.type)==="component").find(u=>n(u.referenceComponentId)===n(e.componentId));if(!i)return[];const o=(s=n(i.slots))==null?void 0:s.find(u=>n(u.referenceSlotId)===n(e.id));return o?[n(o.children),o]:(setTimeout(()=>t(e,i),0),[])},[r,e,t])},yn=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onDragLeave:i,onDragOver:o,onDrop:s,onHoverBar:u})=>{const d=f.useRef(null),[v=[],a]=ot(e,r),{hoveredId:h}=me();be({value:h,matchWidthValue:a==null?void 0:a.id,effect(){a&&u(e,d.current)}},[h,a==null?void 0:a.id,e]);const m=f.useRef({id:Me()});return se.useDrop({element:d,id:m.current.id,drop:(l,p)=>a?s(l,p,a,r,d,m.current.id):void 0,hover:(l,p)=>a?o(l,p,a,r,d,m.current.id):void 0,leave:(l,p)=>a?i(l,p,a,r,d,m.current.id):void 0},[a,r,s,o,i]),x.jsxs("div",{ref:d,onMouseLeave:n,style:{cursor:"default",userSelect:"none",pointerEvents:"all",outline:"none"},onMouseOver:l=>a?t(l,a,d.current):void 0,children:[a&&v.length>0&&v.map(l=>x.jsx(Pe,{element:l,parents:[...r,a]},l.id.value)),v.length===0&&x.jsx("div",{style:{opacity:.5,display:"flex",minWidth:"40px",minHeight:"40px",alignItems:"center",pointerEvents:"none",justifyContent:"center",fontFamily:"sans-serif",backgroundColor:"#80808020"},children:"Drag and drop something here..."})]})},gn=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v})=>{const a=f.useRef(null),{onDragStart:h,onDragEnd:m}=pe(),{selectedId:l}=Te(),{hoveredId:p}=me(),b=y.useObserverValue(e.name),R=y.useObserverValue(e.id);be({value:p,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,a.current)},[p,e]),be({value:l,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,a.current)},[l,e]);const{isDragging:w,preview:C}=se.useDrag({id:R,element:a,end:()=>m(),data:{element:e,parents:r},start:()=>{h()}},[R,e,r,h,m]);f.useEffect(()=>{C(()=>qe(b),S=>S.remove())},[C,b]);const D=f.useRef({id:Me()});return se.useDrop({element:a,id:D.current.id,drop:(S,g)=>u(S,g,e,r,a,D.current.id),hover:(S,g)=>s(S,g,e,r,a,D.current.id),leave:(S,g)=>o(S,g,e,r,a,D.current.id)},[e,r,u,s,o]),x.jsxs("div",{ref:a,onMouseLeave:n,onClick:S=>i(S,e),onMouseOver:S=>t(S,e,a.current),style:{display:"flex",minWidth:"40px",minHeight:"40px",cursor:"default",userSelect:"none",alignItems:"center",pointerEvents:"all",justifyContent:"center",fontFamily:"sans-serif",backgroundColor:"#8080803b",border:"2px dashed #8080803b",opacity:w?.5:void 0},children:['Slot "',b,'"']})},bn=({element:e,parents:r})=>{const[t=[],n]=ot(e,r);return x.jsx("div",{style:{outline:"none"},children:n&&t.map(i=>x.jsx(Pe,{element:i,parents:[...r,n]},i.id.value))})},xn=({element:e,parents:r,...t})=>{const n=Ge(e,r);return hn(e,r)?x.jsx(yn,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar}):n?x.jsx(bn,{element:e,parents:r}):x.jsx(gn,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar})};var $e={},ze={},fr={exports:{}},Ue={exports:{}},te={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kr;function Sn(){if(kr)return te;kr=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,v=e?Symbol.for("react.concurrent_mode"):60111,a=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,l=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,R=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function D(g){if(typeof g=="object"&&g!==null){var L=g.$$typeof;switch(L){case r:switch(g=g.type,g){case d:case v:case n:case o:case i:case h:return g;default:switch(g=g&&g.$$typeof,g){case u:case a:case p:case l:case s:return g;default:return L}}case t:return L}}}function S(g){return D(g)===v}return te.AsyncMode=d,te.ConcurrentMode=v,te.ContextConsumer=u,te.ContextProvider=s,te.Element=r,te.ForwardRef=a,te.Fragment=n,te.Lazy=p,te.Memo=l,te.Portal=t,te.Profiler=o,te.StrictMode=i,te.Suspense=h,te.isAsyncMode=function(g){return S(g)||D(g)===d},te.isConcurrentMode=S,te.isContextConsumer=function(g){return D(g)===u},te.isContextProvider=function(g){return D(g)===s},te.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===r},te.isForwardRef=function(g){return D(g)===a},te.isFragment=function(g){return D(g)===n},te.isLazy=function(g){return D(g)===p},te.isMemo=function(g){return D(g)===l},te.isPortal=function(g){return D(g)===t},te.isProfiler=function(g){return D(g)===o},te.isStrictMode=function(g){return D(g)===i},te.isSuspense=function(g){return D(g)===h},te.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===n||g===v||g===o||g===i||g===h||g===m||typeof g=="object"&&g!==null&&(g.$$typeof===p||g.$$typeof===l||g.$$typeof===s||g.$$typeof===u||g.$$typeof===a||g.$$typeof===R||g.$$typeof===w||g.$$typeof===C||g.$$typeof===b)},te.typeOf=D,te}var ne={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br;function On(){return Br||(Br=1,process.env.NODE_ENV!=="production"&&function(){var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,v=e?Symbol.for("react.concurrent_mode"):60111,a=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,l=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,R=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function D(_){return typeof _=="string"||typeof _=="function"||_===n||_===v||_===o||_===i||_===h||_===m||typeof _=="object"&&_!==null&&(_.$$typeof===p||_.$$typeof===l||_.$$typeof===s||_.$$typeof===u||_.$$typeof===a||_.$$typeof===R||_.$$typeof===w||_.$$typeof===C||_.$$typeof===b)}function S(_){if(typeof _=="object"&&_!==null){var he=_.$$typeof;switch(he){case r:var je=_.type;switch(je){case d:case v:case n:case o:case i:case h:return je;default:var Ee=je&&je.$$typeof;switch(Ee){case u:case a:case p:case l:case s:return Ee;default:return he}}case t:return he}}}var g=d,L=v,M=u,T=s,k=r,B=a,N=n,$=p,I=l,F=t,oe=o,A=i,V=h,G=!1;function ie(_){return G||(G=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),O(_)||S(_)===d}function O(_){return S(_)===v}function P(_){return S(_)===u}function H(_){return S(_)===s}function U(_){return typeof _=="object"&&_!==null&&_.$$typeof===r}function W(_){return S(_)===a}function Z(_){return S(_)===n}function Y(_){return S(_)===p}function q(_){return S(_)===l}function K(_){return S(_)===t}function ee(_){return S(_)===o}function J(_){return S(_)===i}function le(_){return S(_)===h}ne.AsyncMode=g,ne.ConcurrentMode=L,ne.ContextConsumer=M,ne.ContextProvider=T,ne.Element=k,ne.ForwardRef=B,ne.Fragment=N,ne.Lazy=$,ne.Memo=I,ne.Portal=F,ne.Profiler=oe,ne.StrictMode=A,ne.Suspense=V,ne.isAsyncMode=ie,ne.isConcurrentMode=O,ne.isContextConsumer=P,ne.isContextProvider=H,ne.isElement=U,ne.isForwardRef=W,ne.isFragment=Z,ne.isLazy=Y,ne.isMemo=q,ne.isPortal=K,ne.isProfiler=ee,ne.isStrictMode=J,ne.isSuspense=le,ne.isValidElementType=D,ne.typeOf=S}()),ne}var Lr;function it(){return Lr||(Lr=1,process.env.NODE_ENV==="production"?Ue.exports=Sn():Ue.exports=On()),Ue.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var or,Ar;function Cn(){if(Ar)return or;Ar=1;var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function i(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var s={},u=0;u<10;u++)s["_"+String.fromCharCode(u)]=u;var d=Object.getOwnPropertyNames(s).map(function(a){return s[a]});if(d.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(a){v[a]=a}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return or=i()?Object.assign:function(o,s){for(var u,d=n(o),v,a=1;a<arguments.length;a++){u=Object(arguments[a]);for(var h in u)r.call(u,h)&&(d[h]=u[h]);if(e){v=e(u);for(var m=0;m<v.length;m++)t.call(u,v[m])&&(d[v[m]]=u[v[m]])}}return d},or}var ir,Hr;function hr(){if(Hr)return ir;Hr=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ir=e,ir}var ar,$r;function at(){return $r||($r=1,ar=Function.call.bind(Object.prototype.hasOwnProperty)),ar}var sr,zr;function mn(){if(zr)return sr;zr=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var r=hr(),t={},n=at();e=function(o){var s="Warning: "+o;typeof console<"u"&&console.error(s);try{throw new Error(s)}catch{}}}function i(o,s,u,d,v){if(process.env.NODE_ENV!=="production"){for(var a in o)if(n(o,a)){var h;try{if(typeof o[a]!="function"){var m=Error((d||"React class")+": "+u+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw m.name="Invariant Violation",m}h=o[a](s,a,d,u,null,r)}catch(p){h=p}if(h&&!(h instanceof Error)&&e((d||"React class")+": type specification of "+u+" `"+a+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof h+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),h instanceof Error&&!(h.message in t)){t[h.message]=!0;var l=v?v():"";e("Failed "+u+" type: "+h.message+(l??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(t={})},sr=i,sr}var ur,Fr;function wn(){if(Fr)return ur;Fr=1;var e=it(),r=Cn(),t=hr(),n=at(),i=mn(),o=function(){};process.env.NODE_ENV!=="production"&&(o=function(u){var d="Warning: "+u;typeof console<"u"&&console.error(d);try{throw new Error(d)}catch{}});function s(){return null}return ur=function(u,d){var v=typeof Symbol=="function"&&Symbol.iterator,a="@@iterator";function h(O){var P=O&&(v&&O[v]||O[a]);if(typeof P=="function")return P}var m="<<anonymous>>",l={array:w("array"),bigint:w("bigint"),bool:w("boolean"),func:w("function"),number:w("number"),object:w("object"),string:w("string"),symbol:w("symbol"),any:C(),arrayOf:D,element:S(),elementType:g(),instanceOf:L,node:B(),objectOf:T,oneOf:M,oneOfType:k,shape:$,exact:I};function p(O,P){return O===P?O!==0||1/O===1/P:O!==O&&P!==P}function b(O,P){this.message=O,this.data=P&&typeof P=="object"?P:{},this.stack=""}b.prototype=Error.prototype;function R(O){if(process.env.NODE_ENV!=="production")var P={},H=0;function U(Z,Y,q,K,ee,J,le){if(K=K||m,J=J||q,le!==t){if(d){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var he=K+":"+q;!P[he]&&H<3&&(o("You are manually calling a React.PropTypes validation function for the `"+J+"` prop on `"+K+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),P[he]=!0,H++)}}return Y[q]==null?Z?Y[q]===null?new b("The "+ee+" `"+J+"` is marked as required "+("in `"+K+"`, but its value is `null`.")):new b("The "+ee+" `"+J+"` is marked as required in "+("`"+K+"`, but its value is `undefined`.")):null:O(Y,q,K,ee,J)}var W=U.bind(null,!1);return W.isRequired=U.bind(null,!0),W}function w(O){function P(H,U,W,Z,Y,q){var K=H[U],ee=A(K);if(ee!==O){var J=V(K);return new b("Invalid "+Z+" `"+Y+"` of type "+("`"+J+"` supplied to `"+W+"`, expected ")+("`"+O+"`."),{expectedType:O})}return null}return R(P)}function C(){return R(s)}function D(O){function P(H,U,W,Z,Y){if(typeof O!="function")return new b("Property `"+Y+"` of component `"+W+"` has invalid PropType notation inside arrayOf.");var q=H[U];if(!Array.isArray(q)){var K=A(q);return new b("Invalid "+Z+" `"+Y+"` of type "+("`"+K+"` supplied to `"+W+"`, expected an array."))}for(var ee=0;ee<q.length;ee++){var J=O(q,ee,W,Z,Y+"["+ee+"]",t);if(J instanceof Error)return J}return null}return R(P)}function S(){function O(P,H,U,W,Z){var Y=P[H];if(!u(Y)){var q=A(Y);return new b("Invalid "+W+" `"+Z+"` of type "+("`"+q+"` supplied to `"+U+"`, expected a single ReactElement."))}return null}return R(O)}function g(){function O(P,H,U,W,Z){var Y=P[H];if(!e.isValidElementType(Y)){var q=A(Y);return new b("Invalid "+W+" `"+Z+"` of type "+("`"+q+"` supplied to `"+U+"`, expected a single ReactElement type."))}return null}return R(O)}function L(O){function P(H,U,W,Z,Y){if(!(H[U]instanceof O)){var q=O.name||m,K=ie(H[U]);return new b("Invalid "+Z+" `"+Y+"` of type "+("`"+K+"` supplied to `"+W+"`, expected ")+("instance of `"+q+"`."))}return null}return R(P)}function M(O){if(!Array.isArray(O))return process.env.NODE_ENV!=="production"&&(arguments.length>1?o("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):o("Invalid argument supplied to oneOf, expected an array.")),s;function P(H,U,W,Z,Y){for(var q=H[U],K=0;K<O.length;K++)if(p(q,O[K]))return null;var ee=JSON.stringify(O,function(le,_){var he=V(_);return he==="symbol"?String(_):_});return new b("Invalid "+Z+" `"+Y+"` of value `"+String(q)+"` "+("supplied to `"+W+"`, expected one of "+ee+"."))}return R(P)}function T(O){function P(H,U,W,Z,Y){if(typeof O!="function")return new b("Property `"+Y+"` of component `"+W+"` has invalid PropType notation inside objectOf.");var q=H[U],K=A(q);if(K!=="object")return new b("Invalid "+Z+" `"+Y+"` of type "+("`"+K+"` supplied to `"+W+"`, expected an object."));for(var ee in q)if(n(q,ee)){var J=O(q,ee,W,Z,Y+"."+ee,t);if(J instanceof Error)return J}return null}return R(P)}function k(O){if(!Array.isArray(O))return process.env.NODE_ENV!=="production"&&o("Invalid argument supplied to oneOfType, expected an instance of array."),s;for(var P=0;P<O.length;P++){var H=O[P];if(typeof H!="function")return o("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+G(H)+" at index "+P+"."),s}function U(W,Z,Y,q,K){for(var ee=[],J=0;J<O.length;J++){var le=O[J],_=le(W,Z,Y,q,K,t);if(_==null)return null;_.data&&n(_.data,"expectedType")&&ee.push(_.data.expectedType)}var he=ee.length>0?", expected one of type ["+ee.join(", ")+"]":"";return new b("Invalid "+q+" `"+K+"` supplied to "+("`"+Y+"`"+he+"."))}return R(U)}function B(){function O(P,H,U,W,Z){return F(P[H])?null:new b("Invalid "+W+" `"+Z+"` supplied to "+("`"+U+"`, expected a ReactNode."))}return R(O)}function N(O,P,H,U,W){return new b((O||"React class")+": "+P+" type `"+H+"."+U+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+W+"`.")}function $(O){function P(H,U,W,Z,Y){var q=H[U],K=A(q);if(K!=="object")return new b("Invalid "+Z+" `"+Y+"` of type `"+K+"` "+("supplied to `"+W+"`, expected `object`."));for(var ee in O){var J=O[ee];if(typeof J!="function")return N(W,Z,Y,ee,V(J));var le=J(q,ee,W,Z,Y+"."+ee,t);if(le)return le}return null}return R(P)}function I(O){function P(H,U,W,Z,Y){var q=H[U],K=A(q);if(K!=="object")return new b("Invalid "+Z+" `"+Y+"` of type `"+K+"` "+("supplied to `"+W+"`, expected `object`."));var ee=r({},H[U],O);for(var J in ee){var le=O[J];if(n(O,J)&&typeof le!="function")return N(W,Z,Y,J,V(le));if(!le)return new b("Invalid "+Z+" `"+Y+"` key `"+J+"` supplied to `"+W+"`.\nBad object: "+JSON.stringify(H[U],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(O),null,"  "));var _=le(q,J,W,Z,Y+"."+J,t);if(_)return _}return null}return R(P)}function F(O){switch(typeof O){case"number":case"string":case"undefined":return!0;case"boolean":return!O;case"object":if(Array.isArray(O))return O.every(F);if(O===null||u(O))return!0;var P=h(O);if(P){var H=P.call(O),U;if(P!==O.entries){for(;!(U=H.next()).done;)if(!F(U.value))return!1}else for(;!(U=H.next()).done;){var W=U.value;if(W&&!F(W[1]))return!1}}else return!1;return!0;default:return!1}}function oe(O,P){return O==="symbol"?!0:P?P["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&P instanceof Symbol:!1}function A(O){var P=typeof O;return Array.isArray(O)?"array":O instanceof RegExp?"object":oe(P,O)?"symbol":P}function V(O){if(typeof O>"u"||O===null)return""+O;var P=A(O);if(P==="object"){if(O instanceof Date)return"date";if(O instanceof RegExp)return"regexp"}return P}function G(O){var P=V(O);switch(P){case"array":case"object":return"an "+P;case"boolean":case"date":case"regexp":return"a "+P;default:return P}}function ie(O){return!O.constructor||!O.constructor.name?m:O.constructor.name}return l.checkPropTypes=i,l.resetWarningCache=i.resetWarningCache,l.PropTypes=l,l},ur}var cr,Wr;function En(){if(Wr)return cr;Wr=1;var e=hr();function r(){}function t(){}return t.resetWarningCache=r,cr=function(){function n(s,u,d,v,a,h){if(h!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:r};return o.PropTypes=o,o},cr}if(process.env.NODE_ENV!=="production"){var Rn=it(),Dn=!0;fr.exports=wn()(Rn.isElement,Dn)}else fr.exports=En()();var st=fr.exports,ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.FrameContextConsumer=ge.FrameContextProvider=ge.useFrame=ge.FrameContext=void 0;var Tn=f,ut=Pn(Tn);function Pn(e){return e&&e.__esModule?e:{default:e}}var ct=void 0,lt=void 0;typeof document<"u"&&(ct=document);typeof window<"u"&&(lt=window);var yr=ge.FrameContext=ut.default.createContext({document:ct,window:lt});ge.useFrame=function(){return ut.default.useContext(yr)};var _n=yr.Provider,jn=yr.Consumer;ge.FrameContextProvider=_n;ge.FrameContextConsumer=jn;var gr={};Object.defineProperty(gr,"__esModule",{value:!0});var In=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),vr=f;dt(vr);var Vn=st,lr=dt(Vn);function dt(e){return e&&e.__esModule?e:{default:e}}function Mn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function kn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Bn(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var ft=function(e){Bn(r,e);function r(){return Mn(this,r),kn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return In(r,[{key:"componentDidMount",value:function(){this.props.contentDidMount()}},{key:"componentDidUpdate",value:function(){this.props.contentDidUpdate()}},{key:"render",value:function(){return vr.Children.only(this.props.children)}}]),r}(vr.Component);ft.propTypes={children:lr.default.element.isRequired,contentDidMount:lr.default.func.isRequired,contentDidUpdate:lr.default.func.isRequired};gr.default=ft;Object.defineProperty(ze,"__esModule",{value:!0});ze.Frame=void 0;var pr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ln=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),vt=f,De=Ke(vt),An=qt,Ur=Ke(An),Hn=st,Se=Ke(Hn),$n=ge,zn=gr,Fn=Ke(zn);function Ke(e){return e&&e.__esModule?e:{default:e}}function Wn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Un(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Yn(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var br=ze.Frame=function(e){Yn(r,e);function r(t,n){Wn(this,r);var i=Un(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n));return i.setRef=function(o){i.nodeRef.current=o;var s=i.props.forwardedRef;typeof s=="function"?s(o):s&&(s.current=o)},i.handleLoad=function(){clearInterval(i.loadCheck),i.state.iframeLoaded||i.setState({iframeLoaded:!0})},i.loadCheck=function(){return setInterval(function(){i.handleLoad()},500)},i._isMounted=!1,i.nodeRef=De.default.createRef(),i.state={iframeLoaded:!1},i}return Ln(r,[{key:"componentDidMount",value:function(){this._isMounted=!0;var n=this.getDoc();n&&this.nodeRef.current.contentWindow.addEventListener("DOMContentLoaded",this.handleLoad)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.nodeRef.current.removeEventListener("DOMContentLoaded",this.handleLoad)}},{key:"getDoc",value:function(){return this.nodeRef.current?this.nodeRef.current.contentDocument:null}},{key:"getMountTarget",value:function(){var n=this.getDoc();return this.props.mountTarget?n.querySelector(this.props.mountTarget):n.body.children[0]}},{key:"renderFrameContents",value:function(){if(!this._isMounted)return null;var n=this.getDoc();if(!n)return null;var i=this.props.contentDidMount,o=this.props.contentDidUpdate,s=n.defaultView||n.parentView,u=De.default.createElement(Fn.default,{contentDidMount:i,contentDidUpdate:o},De.default.createElement($n.FrameContextProvider,{value:{document:n,window:s}},De.default.createElement("div",{className:"frame-content"},this.props.children))),d=this.getMountTarget();return d?[Ur.default.createPortal(this.props.head,this.getDoc().head),Ur.default.createPortal(u,d)]:null}},{key:"render",value:function(){var n=pr({},this.props,{srcDoc:this.props.initialContent,children:void 0});return delete n.head,delete n.initialContent,delete n.mountTarget,delete n.contentDidMount,delete n.contentDidUpdate,delete n.forwardedRef,De.default.createElement("iframe",pr({},n,{ref:this.setRef,onLoad:this.handleLoad}),this.state.iframeLoaded&&this.renderFrameContents())}}]),r}(vt.Component);br.propTypes={style:Se.default.object,head:Se.default.node,initialContent:Se.default.string,mountTarget:Se.default.string,contentDidMount:Se.default.func,contentDidUpdate:Se.default.func,children:Se.default.oneOfType([Se.default.element,Se.default.arrayOf(Se.default.element)])};br.defaultProps={style:{},head:null,children:void 0,mountTarget:void 0,contentDidMount:function(){},contentDidUpdate:function(){},initialContent:'<!DOCTYPE html><html><head></head><body><div class="frame-root"></div></body></html>'};ze.default=De.default.forwardRef(function(e,r){return De.default.createElement(br,pr({},e,{forwardedRef:r}))});(function(e){Object.defineProperty(e,"__esModule",{value:!0});var r=ze;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n(r).default}});var t=ge;Object.defineProperty(e,"FrameContext",{enumerable:!0,get:function(){return t.FrameContext}}),Object.defineProperty(e,"FrameContextConsumer",{enumerable:!0,get:function(){return t.FrameContextConsumer}}),Object.defineProperty(e,"useFrame",{enumerable:!0,get:function(){return t.useFrame}});function n(i){return i&&i.__esModule?i:{default:i}}})($e);const Nn=Kt($e),qn=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v})=>{const a=f.useRef(null),{window:h,document:m}=$e.useFrame(),[l,p]=y.useObserver(e.text),b=y.useObserverValue(e.name),R=y.useObserverValue(e.id),{onExpressionToValue:w,onValueToExpression:C}=pe(),{onDragStart:D,onDragEnd:S}=pe(),{selectedId:g}=Te(),{hoveredId:L}=me(),[M,T]=f.useState(!1);f.useEffect(()=>{!a.current||!M||(a.current.focus(),v(e,null))},[M,v]),be({value:L,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,a.current)},[L,e]),be({value:g,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,a.current)},[g,e]);const{isDragging:k,preview:B}=se.useDrag({id:R,canDrag:!M,element:a,end:()=>S(),data:{element:e,parents:r},start:()=>{D()}},[R,M,e,r,D,S]);f.useEffect(()=>{B(()=>qe(b),A=>A.remove())},[B,b]);const N=f.useRef({id:Me()});se.useDrop({element:a,id:N.current.id,drop:(A,V)=>u(A,V,e,r,a,N.current.id),hover:(A,V)=>s(A,V,e,r,a,N.current.id),leave:(A,V)=>o(A,V,e,r,a,N.current.id)},[e,r,u,s,o]);const $=f.useCallback(A=>{if(!h||!m)return;const V=h.getSelection();if(!V)return;const G=m.createRange(),ie=A.currentTarget;G.selectNodeContents(ie),V.removeAllRanges(),V.addRange(G)},[h,m]),I=f.useCallback(A=>{A.stopPropagation(),(A.code==="Escape"||A.code==="Enter"||A.code==="NumpadEnter")&&(A.currentTarget.blur(),v(e,A.currentTarget))},[v,e]),F=f.useCallback(A=>{T(!1),p(String(C(A.currentTarget.innerText,"text","textContent",e))),v(e,A.currentTarget)},[v,C,e]),oe=f.useMemo(()=>w(l,"text","textContent",e)??"",[l,w,e]);return x.jsx("span",{contentEditable:M,dangerouslySetInnerHTML:{__html:oe},onBlur:F,onFocus:$,onKeyDown:I,onDoubleClick:()=>T(!0),ref:a,onMouseLeave:n,onClick:A=>M?A.stopPropagation():i(A,e),onMouseOver:A=>M?A.stopPropagation():t(A,e,a.current),style:{resize:"none",cursor:"default",pointerEvents:"all",opacity:k?.5:void 0,borderRadius:M?4:void 0,boxShadow:M?"0 0 6px 2px orange":void 0}})},Gn=({element:e})=>{const{onExpressionToValue:r}=pe(),t=y.useObserverValue(e.text);return f.useMemo(()=>r(t,"text","textContent",e),[t,r,e])},Kn=({element:e,parents:r,...t})=>Ge(e,r)?x.jsx(Gn,{element:e,parents:r}):x.jsx(qn,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar}),Pe=({element:e,parents:r})=>{const t=y.useObserverValue(e.type),{select:n,updateSelectBar:i}=Te(),{onDrop:o,value:s}=pe(),{hover:u,updateHoverBar:d}=me(),v=f.useCallback((w,C)=>{w.stopPropagation(),w.preventDefault(),n(C.id.value)},[n]),a=f.useCallback(w=>{w.stopPropagation(),w.preventDefault(),n(void 0),u(void 0)},[n,u]),h=f.useCallback((w,C)=>{w.stopPropagation(),u(C.id.value)},[u]),m=f.useCallback(w=>{w.stopPropagation(),u(void 0)},[u]),l=f.useCallback((w,C)=>{d(w,()=>({top:(C==null?void 0:C.offsetTop)||0,left:(C==null?void 0:C.offsetLeft)||0,width:(C==null?void 0:C.getBoundingClientRect().width)||0,height:(C==null?void 0:C.getBoundingClientRect().height)||0}))},[d]),p=f.useCallback((w,C)=>{i(w,r,()=>({top:(C==null?void 0:C.offsetTop)||0,left:(C==null?void 0:C.offsetLeft)||0,width:(C==null?void 0:C.getBoundingClientRect().width)||0,height:(C==null?void 0:C.getBoundingClientRect().height)||0}))},[i,r]),b=f.useCallback((w,C,D,S,g,L)=>{if(!Mr(C,D,S,g,L))return u(void 0);u(D.id.value)},[u]),R=f.useCallback((w,C,D,S,g,L)=>{var B,N,$,I,F,oe;if(!Mr(C,D,S,g,L))return;const T=nn(C,D,g);if(!T)return;const k=T.isOverStart||T.isOverEnd;if(!(!k&&D.type.value==="component"))if(Object.keys(w).includes("id")){const A=w;if(k){const V=S.slice(-1).at(0),G=((B=(V?V.children:s).value)==null?void 0:B.findIndex(ie=>ie.id.value===D.id.value))??-1;o({element:A.id,from:{position:-1,element:null},to:{element:V||"root",position:T.isOverStart?G:G+1}})}else{const V=((N=D.children.value)==null?void 0:N.length)||-1;o({element:A.id,from:{position:-1,element:null},to:{element:D,position:T.isOverStart?V:V+1}})}}else{const A=w,V=($=A.parents)==null?void 0:$.slice(-1).at(0),G=V||"root";if(G!=="root"&&G.type.value==="component")return;const ie=((I=(G==="root"?s:G.children).value)==null?void 0:I.findIndex(O=>O.id.value===A.element.id.value))??-1;if(k){const O=S.slice(-1).at(0),P=((F=(O?O.children:s).value)==null?void 0:F.findIndex(H=>H.id.value===D.id.value))??-1;o({element:A.element,from:{position:ie,element:G},to:{element:O||"root",position:T.isOverStart?P:P+1}})}else{const O=((oe=D.children.value)==null?void 0:oe.length)||-1;o({element:A.element,from:{position:ie,element:G},to:{element:D,position:T.isOverStart?O:O+1}})}n(A.element.id.value)}},[n,o]);return t==="component"?x.jsx(dn,{parents:r,element:e,onDrop:R,onDragOver:b,onDragLeave:()=>{},onDoubleClick:a,onSelect:v,onMouseOver:h,onMouseLeave:m,onHoverBar:l,onSelectBar:p}):t==="slot"?x.jsx(xn,{parents:r,element:e,onDrop:R,onDragOver:b,onDragLeave:()=>{},onSelect:v,onMouseOver:h,onMouseLeave:m,onHoverBar:l,onSelectBar:p}):t==="text"?x.jsx(Kn,{parents:r,element:e,onDrop:R,onDragOver:b,onDragLeave:()=>{},onSelect:v,onMouseOver:h,onMouseLeave:m,onHoverBar:l,onSelectBar:p}):x.jsx(pn,{parents:r,element:e,onDrop:R,onDragOver:b,onDragLeave:()=>{},onSelect:v,onMouseOver:h,onMouseLeave:m,onHoverBar:l,onSelectBar:p})},Jn=()=>{const e=f.useRef(null),r=f.useRef({id:Me()}),{value:t,onDrop:n}=pe(),{select:i}=Te(),{hover:o}=me(),s=y.useObserverValue(t),u=f.useCallback((a,h)=>{var m;if(a)if(Object.keys(a).includes("id"))n({element:a.id,from:{position:-1,element:null},to:{element:"root",position:t.value.length}});else{const l=a,p=rn(l.parents||[]),b=p||"root",R=((m=p==null?void 0:p.children.value)==null?void 0:m.findIndex(w=>w.id.value===l.element.id.value))??-1;n({element:l.element,from:{element:b,position:R},to:{element:"root",position:t.value.length}}),i(l.element.id.value)}},[t,i]),d=f.useCallback(a=>{a.stopPropagation(),i(void 0)},[i]),[{isDraggingOver:v}]=se.useDrop({drop:u,element:e,id:r.current.id,leave:()=>o(void 0)},[u]);return x.jsxs("div",{onClick:d,ref:e,className:"flex-1 h-full w-full",children:[s.map(a=>x.jsx(Pe,{parents:[],element:a},a.id.value)),s.length===0&&x.jsx("p",{children:"Drag and drop here to start"}),v&&x.jsx(on,{})]})};function Xn({onSelect:e,onHover:r,selectedId:t,hoveredId:n,...i}){return x.jsx(se.DragAndDropProvider,{children:x.jsx(Zt,{...i,children:x.jsx(Qt,{id:t,onSelect:e,children:x.jsx(en,{id:n,onHover:r,children:x.jsx(Jn,{})})})})})}const pt=f.createContext({});function Zn({children:e,...r}){return x.jsx(pt.Provider,{value:r,children:e})}const ve=()=>f.useContext(pt),ht=f.createContext({}),Qn=({children:e})=>{const r=f.useRef(y.observe(!1)),t=f.useRef(y.observe(!1)),n=f.useRef(y.observe(0)),i=f.useRef(y.observe(0)),o=f.useRef(y.observe(0)),s=f.useRef(y.observe(0)),u=f.useMemo(()=>({observableIsHorizontal:r.current,observableIsVisible:t.current,observableHeight:n.current,observableWidth:i.current,observableLeft:o.current,observableTop:s.current}),[]),d=f.useCallback(a=>{y.set(s.current,h=>h!==a.top?a.top:h),y.set(o.current,h=>h!==a.left?a.left:h),y.set(i.current,h=>h!==a.width?a.width:h),y.set(n.current,h=>h!==a.height?a.height:h),y.set(t.current,h=>h!==a.isVisible?a.isVisible:h),y.set(r.current,h=>h!==!!a.isHorizontal?!!a.isHorizontal:h)},[]),v=f.useCallback(()=>{d({width:0,height:0,top:-100,left:-100,isVisible:!1})},[d]);return x.jsx(ht.Provider,{value:{showInsertBar:d,hideInsertBar:v,observables:u},children:e})},we=()=>f.useContext(ht),eo=({color:e="#3e8ce4"})=>{const{observableHeight:r,observableIsHorizontal:t,observableIsVisible:n,observableLeft:i,observableTop:o,observableWidth:s}=we().observables,[u]=y.useObserver(o),[d]=y.useObserver(i),[v]=y.useObserver(s),[a]=y.useObserver(r),[h]=y.useObserver(n),[m]=y.useObserver(t),l=f.useMemo(()=>({width:m?v:4,height:m?4:a,top:u-(m?2:0),left:d-(m?0:2)}),[a,m,d,u,v]);return h?x.jsx("div",{className:"animate-pulse",style:{zIndex:10,borderRadius:5,top:l.top,position:"fixed",left:l.left,width:l.width,pointerEvents:"none",height:l.height,backgroundColor:e}}):null},yt=f.createContext({}),ro=({children:e,id:r,onSelect:t})=>{const n=f.useRef({documentHorizontalScroll:y.observe(0),playgroundSize:y.observe(void 0),documentVerticalScroll:y.observe(0),getPosition:y.observe(void 0),parents:y.observe(void 0),element:y.observe(void 0),onSelect:t,id:r});return f.useEffect(()=>{n.current.id=r},[r]),f.useEffect(()=>{n.current.onSelect=t},[t]),x.jsx(yt.Provider,{value:n.current,children:e})};var gt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Yr=f.createContext&&f.createContext(gt),to=["attr","size","title"];function no(e,r){if(e==null)return{};var t=oo(e,r),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function oo(e,r){if(e==null)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ye.apply(this,arguments)}function Nr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Ne(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Nr(Object(t),!0).forEach(function(n){io(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nr(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function io(e,r,t){return r=ao(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ao(e){var r=so(e,"string");return typeof r=="symbol"?r:r+""}function so(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function bt(e){return e&&e.map((r,t)=>f.createElement(r.tag,Ne({key:t},r.attr),bt(r.child)))}function Je(e){return r=>f.createElement(uo,Ye({attr:Ne({},e.attr)},r),bt(e.child))}function uo(e){var r=t=>{var{attr:n,size:i,title:o}=e,s=no(e,to),u=i||t.size||"1em",d;return t.className&&(d=t.className),e.className&&(d=(d?d+" ":"")+e.className),f.createElement("svg",Ye({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,s,{className:d,style:Ne(Ne({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&f.createElement("title",null,o),e.children)};return Yr!==void 0?f.createElement(Yr.Consumer,null,t=>r(t)):r(gt)}function co(e){return Je({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.854 7l-5-5h-.707l-5 5 .707.707L8 3.561V14h1V3.56l4.146 4.147.708-.707z"},child:[]}]})(e)}function lo(e){return Je({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.5 0h-9L7 1.5V6H2.5L1 7.5v15.07L2.5 24h12.07L16 22.57V18h4.7l1.3-1.43V4.5L17.5 0zm0 2.12l2.38 2.38H17.5V2.12zm-3 20.38h-12v-15H7v9.07L8.5 18h6v4.5zm6-6h-12v-15H16V6h4.5v10.5z"},child:[]}]})(e)}function fo(e){return Je({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M10.232 10.707L8.5 12.44V9h-1v3.44l-1.732-1.733-.707.707L7.646 14h.708l2.585-2.586-.707-.707zM5.061 3.586l.707.707L7.5 2.56V6h1V2.56l1.732 1.733.707-.707L8.354 1h-.708L5.061 3.586zm-.268 1.682L3.06 7H6.5v1H3.06l1.733 1.732-.707.707L1.5 7.854v-.708l2.586-2.585.707.707zM9.5 7h3.44l-1.733-1.732.707-.707L14.5 7.146v.708l-2.586 2.585-.707-.707L12.94 8H9.5V7z"},child:[]}]})(e)}function vo(e){return Je({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3h3v1h-1v9l-1 1H4l-1-1V4H2V3h3V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1zM9 2H6v1h3V2zM4 13h7V4H4v9zm2-8H5v7h1V5zm1 0h1v7H7V5zm2 0h1v7H9V5z"},child:[]}]})(e)}const po=e=>{let r,t=0;if(!(!e||e.length===0)){do t--,r=e==null?void 0:e.slice(t).at(0);while(!r||!["html","slot-content"].includes(r.type.value));return r}},Fe=(e,r)=>{const t=document.createElement("label");return t.style.padding="4px",t.style.paddingTop="2px",t.style.paddingRight="8px",t.style.paddingBottom="2px",t.style.backgroundColor="#3e8ce4",t.style.color="#ffffff",t.style.alignItems="center",t.style.borderRadius="2px",t.style.fontWeight="600",t.style.position="fixed",t.style.fontSize="11px",t.style.display="flex",t.style.height="20px",t.style.zIndex="-100",t.style.width="auto",t.appendChild(new Text(e)),document.body.appendChild(t),t};function ho(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function xt(e){return Qr.camel(ho(e))}const qr=(e,r,t,n,i)=>!(!n.current||e.droppableId!==i||e.draggingId===r.id.value||t.some(u=>e.draggingId===u.id.value)),yo=(e,r,t)=>{if(!t.current)return null;if(r.type.value==="slot-content"&&Array.isArray(r.children.value))return{isOverCurrentStart:!1,isOverCurrentEnd:!1,isOverEnd:!1,isOverStart:!1};const n=["component","slot","text"].includes(r.type.value)?!1:Array.isArray(r.children.value),i=t.current.getBoundingClientRect(),o=n?5:i.height/2,s=e.x-i.x,u=e.y-i.y,d=u>=0&&u<=o,v=u>=i.height-o&&u<=i.height,a=u>=o&&u<=i.height-o,h=s>=0&&s<=o,m=s>=i.width-o&&s<=i.width,l=s>=o&&s<=i.width-o;let p=!1,b=!1,R=!1,w=!1;if(n){const C=v||m||d||h;p=l&&a&&!C,b=l&&a&&!C,R=v||m,w=d||h}else R=(v||m)&&!d,w=(d||h)&&!v;return{isOverCurrentStart:p,isOverCurrentEnd:b,isOverEnd:R,isOverStart:w}},go=(e,r,t)=>{if(!t.current)return null;const n=t.current.getBoundingClientRect();if(r.type.value==="slot-content"&&Array.isArray(r.children.value))return{isHorizontal:!0,left:n.left,width:n.width,height:n.height,top:n.top+n.height/2};const i=["component","slot","text"].includes(r.type.value)?!1:Array.isArray(r.children.value),o=i?5:n.height/2,s=e.x-n.x,u=e.y-n.y,d=u>=n.height-o&&u<=n.height,v=u>=o&&u<=n.height-o,a=s>=0&&s<=o,h=s>=n.width-o&&s<=n.width,m=s>=o&&s<=n.width-o;let l=!0,p=n.top,b=n.left,R=n.width,w=n.height;return d&&(a||h||m)?p=n.top+n.height:v&&a?l=!1:v&&h?(b=n.left+n.width,l=!1):m&&v&&(p=n.top+(i?n.height/2:n.height)),{top:p,isHorizontal:l,left:b,width:R,height:w}},ke=()=>Gr.v4(),Oe=()=>{const e=f.useContext(yt),r=f.useCallback(o=>{e.onSelect(o)},[e.id]),t=f.useCallback((o,s,u)=>{y.set(e.getPosition,()=>u),y.set(e.parents,s),y.set(e.element,o)},[e.getPosition]),n=f.useCallback((o,s)=>{y.set(e.documentHorizontalScroll,s),y.set(e.documentVerticalScroll,o)},[e.documentVerticalScroll,e.documentHorizontalScroll]),i=f.useCallback((o,s)=>{y.set(e.playgroundSize,{height:o,width:s})},[e.playgroundSize]);return{select:r,selectedId:e.id,selectedElement:e.element,selectedElementParents:e.parents,updateSelectBar:t,updateSelectBarScroll:n,updateSelectBarPlaygroundSize:i,selectBarGetPosition:e.getPosition,selectBarPlaygroundSize:e.playgroundSize,selectBarDocumentVerticalScroll:e.documentVerticalScroll,selectBarDocumentHorizontalScroll:e.documentHorizontalScroll}},bo=f.memo(({children:e,zIndex:r=0,top:t=-1e3,left:n=-1e3,width:i=0,height:o=0,color:s="#4a87ee"})=>{const u=f.useRef(null),d=f.useMemo(()=>{if(!u.current||n+u.current.getBoundingClientRect().width<=u.current.ownerDocument.documentElement.clientWidth)return 0;const v=n+u.current.getBoundingClientRect().width;return u.current.ownerDocument.documentElement.clientWidth-v},[n]);return x.jsx("div",{"data-select":!0,style:{top:t,left:n,position:"fixed",border:"thin solid",pointerEvents:"none",width:i,height:o,fontSize:14,zIndex:5+r,borderColor:s,fontFamily:"sans-serif"},children:x.jsx("span",{ref:u,style:{zIndex:5,height:20,color:"white",paddingLeft:8,borderRadius:4,paddingRight:8,outline:"none",display:"flex",left:d,userSelect:"none",position:"absolute",alignItems:"center",pointerEvents:"none",backgroundColor:s,top:t-20<0?o+20>=500?0:o:-20},children:e})})}),xo=f.memo(()=>{const e=f.useRef(null),{onDragStart:r,onDragEnd:t,onDuplicate:n,onRemove:i}=ve(),{hideInsertBar:o}=we(),{select:s,selectedId:u,selectedElement:d,selectBarGetPosition:v,selectedElementParents:a,selectBarDocumentVerticalScroll:h,selectBarDocumentHorizontalScroll:m}=Oe(),l=y.useObserverValue(a),p=y.useObserverValue(d),b=y.useObserverValue(u),R=y.useSelectorValue(({get:B})=>p?B(p.name):"",[p]),{width:w,height:C,top:D,left:S}=y.useSelectorValue(({get:B})=>{const N=B(m),$=B(h),I=B(v);return I?{width:I().width,height:I().height,top:I().top-$,left:I().left-N}:{top:0,left:0,width:0,height:0}},[m,h,v]),g=f.useCallback(B=>{B.stopPropagation();const N=l==null?void 0:l.slice(-1).at(0);if(N)if(N.type.value==="slot-content"){const $=l==null?void 0:l.find(I=>{var F;return I.type.value!=="component"?!1:(F=I.slots.value)==null?void 0:F.some(oe=>oe.id.value===N.id.value)});s($==null?void 0:$.id.value)}else s(N.id.value)},[s,l]),L=f.useCallback(()=>{p&&i(p)},[i,p]),M=f.useCallback(()=>{p&&n(p)},[n,p]),{preview:T,isDragging:k}=se.useDrag({element:e,id:b||"default",start:()=>{r()},end:()=>{o(),t()},canDrag:!!p&&Array.isArray(l),data:{element:p,parents:l}},[b,p,l,o,r,t]);return f.useEffect(()=>{T(()=>Fe(R),B=>B.remove())},[T,R]),!b||w===0&&C===0&&S===0&&D===0?null:x.jsx(bo,{zIndex:1,top:D-1,width:w,height:C,left:S-1,color:"#4a87ee",children:x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,whiteSpace:"nowrap",wordBreak:"keep-all"},children:[R,!k&&x.jsxs("div",{style:{pointerEvents:"auto",display:"flex",alignItems:"center",gap:4},children:[l&&l.length>0&&x.jsx(co,{title:"Select parent",onClick:g,style:{cursor:"pointer",width:14,height:14}}),x.jsx(vo,{title:"Remove element",onClick:L,style:{cursor:"pointer",width:14,height:14}}),x.jsx(lo,{title:"Duplicate element and children",onClick:M,style:{cursor:"pointer",width:14,height:14}}),x.jsx("span",{ref:e,title:"Drag element",style:{display:"flex",cursor:"move"},children:x.jsx(fo,{style:{width:14,height:14,pointerEvents:"none"}})})]})]})})}),St=f.createContext({}),So=({children:e,id:r,onHover:t})=>{const n=f.useRef({documentHorizontalScroll:y.observe(0),playgroundSize:y.observe(void 0),documentVerticalScroll:y.observe(0),getPosition:y.observe(void 0),element:y.observe(void 0),onHover:t,id:r});return f.useEffect(()=>{n.current.id=r},[r]),f.useEffect(()=>{n.current.onHover=t},[t]),x.jsx(St.Provider,{value:n.current,children:e})},Ce=()=>{const e=f.useContext(St),r=f.useCallback(o=>{e.id.value!==o&&e.onHover(o)},[e.id]),t=f.useCallback((o,s)=>{y.set(e.getPosition,()=>s),y.set(e.element,o)},[e.getPosition]),n=f.useCallback((o,s)=>{y.set(e.documentHorizontalScroll,s),y.set(e.documentVerticalScroll,o)},[e.documentVerticalScroll,e.documentHorizontalScroll]),i=f.useCallback((o,s)=>{y.set(e.playgroundSize,{height:o,width:s})},[e.playgroundSize]);return{hover:r,hoveredId:e.id,hoveredElement:e.element,updateHoverBar:t,updateHoverBarScroll:n,updateHoverBarPlaygroundSize:i,hoverBarGetPosition:e.getPosition,hoverBarPlaygroundSize:e.playgroundSize,hoverBarDocumentVerticalScroll:e.documentVerticalScroll,hoverBarDocumentHorizontalScroll:e.documentHorizontalScroll}},Oo=f.memo(({children:e,zIndex:r=0,top:t=-1e3,left:n=-1e3,width:i=0,height:o=0,color:s="#4a87ee"})=>{const u=f.useRef(null),d=f.useMemo(()=>{if(!u.current||n+u.current.getBoundingClientRect().width<=u.current.ownerDocument.documentElement.clientWidth)return 0;const v=n+u.current.getBoundingClientRect().width;return u.current.ownerDocument.documentElement.clientWidth-v},[n]);return x.jsx("div",{"data-hover":!0,style:{top:t,left:n,position:"fixed",border:"thin solid",pointerEvents:"none",width:i,height:o,fontSize:14,zIndex:5+r,borderColor:s,fontFamily:"sans-serif"},children:x.jsx("span",{ref:u,style:{zIndex:5,height:20,color:"white",paddingLeft:8,borderRadius:4,paddingRight:8,outline:"none",display:"flex",left:d,userSelect:"none",position:"absolute",alignItems:"center",pointerEvents:"none",backgroundColor:s,top:t-20<0?o+20>=500?0:o:-20},children:e})})}),Co=f.memo(()=>{const{selectedId:e}=Oe(),{hoveredId:r,hoveredElement:t,hoverBarGetPosition:n,hoverBarDocumentVerticalScroll:i,hoverBarDocumentHorizontalScroll:o}=Ce(),s=y.useObserverValue(o),u=y.useObserverValue(i),d=y.useObserverValue(n),v=y.useObserverValue(t),a=y.useObserverValue(e),h=y.useObserverValue(r),m=y.useSelectorValue(({get:w})=>v?w(v.name):"",[v]),{width:l,height:p,top:b,left:R}=f.useMemo(()=>d?{width:d().width,height:d().height,top:d().top-u,left:d().left-s}:{top:0,left:0,width:0,height:0},[s,u,d]);return!h||h===a||l===0&&p===0&&R===0&&b===0?null:x.jsx(Oo,{zIndex:1,top:b-1,width:l,left:R-1,height:p,color:"#ed8b5f",children:x.jsx("div",{style:{whiteSpace:"nowrap",wordBreak:"keep-all"},children:m})})}),mo=({children:e,onScroll:r,onRef:t,onKeyDown:n,onClick:i})=>{const{document:o}=$e.useFrame();return f.useEffect(()=>{o&&t(o)},[t,o]),f.useEffect(()=>{o&&(o.onclick=i,o.onkeydown=n,o.onscroll=s=>r(s.target.documentElement.scrollTop,s.target.documentElement.scrollLeft))},[o,r,n,i]),e},wo=({children:e,styles:r,draggingHover:t,resetBody:n})=>{const i=y.useObserverValue(f.useMemo(()=>y.selector(({get:s})=>s(r).map(u=>({id:s(u.id),content:s(u.content)}))),[r])),o=f.useMemo(()=>x.jsxs(x.Fragment,{children:[i.map(s=>f.createElement("style",{key:s.id},s.content)),x.jsx("style",{children:["* { outline: none; }",n?"body { margin:0!important; }":"",`html${t?"":":hover"} body .frame-content * {`,"  outline: thin solid #80808050;","}",'[data-hover="true"] *, [data-select="true"] * {',"  outline: none!important;","}"].join(`
`)})]}),[i,n]);return x.jsx(Nn,{tabIndex:-1,head:o,mountTarget:"body",onContextMenu:s=>s.preventDefault(),className:"w-full h-full bg-white border-none outline-none",initialContent:'<html tabindex="0"><head></head><body style="min-height: 500px"></body></html>',children:e})},Eo=(e,r)=>y.useSelectorValue(({get:t})=>r.map(n=>t(n.id)).includes(t(e.id)),[e,r]),Xe=(e,r)=>y.useSelectorValue(({get:n})=>{const i=[...r].reverse();let o;for(let s=0;s<i.length;s++){const u=i[s];if(n(u.type)==="slot-content"&&(o=!1),n(u.type)==="component")if(o===!1)o=void 0;else return!0}return!!o},[r,e]),Ro=({element:e})=>{const r=y.useObserverValue(e.name);return x.jsxs("div",{style:{cursor:"default",userSelect:"none",pointerEvents:"none",outline:"none",border:"2px solid orange",fontFamily:"sans-serif"},children:['This component "',x.jsx("b",{style:{fontWeight:"bold",outline:"none",pointerEvents:"none"},children:r}),'" introduces a infinite loop.']})},xe=({value:e,matchWidthValue:r,effect:t},n)=>{const i=y.useSelectorValue(({get:o})=>{if(!e)return!1;const s=o(e);if(!r)return!1;const u=o(r);return s===u},[...n]);f.useEffect(()=>{i&&t()},[i])},Do=({element:e,onHoverBar:r,onSelectBar:t,onMouseLeave:n,onMouseOver:i,onSelect:o})=>{const s=f.useRef(null),{selectedId:u}=Oe(),{hoveredId:d}=Ce(),v=y.useObserverValue(e.name);return xe({value:d,matchWidthValue:e==null?void 0:e.id,effect:()=>r(e,s.current)},[d,e]),xe({value:u,matchWidthValue:e==null?void 0:e.id,effect:()=>t(e,s.current)},[u,e]),x.jsxs("div",{ref:s,onMouseLeave:n,onClick:a=>o(a,e),onMouseOver:a=>i(a,e,s.current),style:{outline:"none",cursor:"default",userSelect:"none",pointerEvents:"all",fontFamily:"sans-serif",border:"2px solid orange"},children:['This component "',x.jsx("b",{style:{fontWeight:"bold",outline:"none",pointerEvents:"none"},children:v}),'" introduces a infinite loop.']})},To=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v,onDoubleClick:a})=>{const h=f.useRef(null),{onDragStart:m,onDragEnd:l,components:p}=ve(),{hideInsertBar:b}=we(),{selectedId:R}=Oe(),{hoveredId:w}=Ce(),C=y.useObserverValue(e.name),D=y.useObserverValue(e.id),S=y.useSelectorValue(({get:k})=>{const B=k(p).find(N=>k(N.id)===k(e.referenceComponentId));return B?k(B.content):[]},[p,e]);xe({value:w,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,h.current)},[w,e]),xe({value:R,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,h.current)},[R,e]);const g=f.useMemo(()=>!S||S.length===0?null:S.map(k=>x.jsx(_e,{element:k,parents:[...r,e]},k.id.value)),[S,r,e]),{isDragging:L,preview:M}=se.useDrag({id:D,element:h,data:{element:e,parents:r},start:()=>{m()},end:()=>{b(),l()}},[D,e,r,b,m,l]);f.useEffect(()=>{M(()=>Fe(C),k=>k.remove())},[M,C]);const T=f.useRef({id:ke()});return se.useDrop({element:h,id:T.current.id,drop:(k,B)=>u(k,B,e,r,h,T.current.id),hover:(k,B)=>s(k,B,e,r,h,T.current.id),leave:(k,B)=>o(k,B,e,r,h,T.current.id)},[e,r,u,s,o]),x.jsx("div",{ref:h,onMouseLeave:n,onClick:k=>i(k,e),onDoubleClick:k=>a(k,e),onMouseOver:k=>t(k,e,h.current),style:{cursor:"default",userSelect:"none",pointerEvents:"all",opacity:L?.5:void 0},children:g})},Po=({element:e,parents:r})=>{const{components:t}=ve(),n=y.useSelectorValue(({get:i})=>{const o=i(t).find(s=>i(s.id)===i(e.referenceComponentId));return o?i(o.content):[]},[t,e]);return x.jsx("div",{style:{outline:"none",pointerEvents:"none"},children:n.map(i=>x.jsx(_e,{element:i,parents:[...r,e]},i.id.value))})},_o=({element:e,parents:r,...t})=>{const n=Eo(e,r),i=Xe(e,r);return n?i?x.jsx(Ro,{element:e}):x.jsx(Do,{element:e,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar}):i?x.jsx(Po,{element:e,parents:r}):x.jsx(To,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onDoubleClick:t.onDoubleClick,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar})},Ot=e=>{const{onExpressionToValue:r}=ve(),t=f.useMemo(()=>y.selector(({get:n})=>{const i=n(e.style);if(!i)return{};const o={};return i.forEach(s=>{const u=n(s.name),d=n(s.value);u&&(o[xt(u)]=r(d,u,"style",e))}),o}),[e,r,e]);return y.useObserverValue(t)},Ct=e=>{const{onExpressionToValue:r}=ve(),t=f.useMemo(()=>y.selector({get({get:n}){const i=n(e.attributes);if(!i)return[{},{}];const o={},s={};return i.forEach(u=>{const d=n(u.name);if(d===void 0||d==="hidden"||d==="style")return;const v=r(n(u.value),d,"attribute",e),a=xt(d);switch(a){case"options":s.options=v;break;case"className":o.className=v;break;case"class":o.className=v;break;default:if(d.startsWith("data-")){o[d]=v;return}else o[a]=v;break}}),[o,s]}}),[e,r]);return y.useObserverValue(t)},mt=f.forwardRef(({tag:e,...r},t)=>f.createElement(e,{ref:t,...r})),jo=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v})=>{const a=f.useRef(null),[h,m]=f.useState(!1),[l]=Ct(e),p=y.useObserverValue(e.children),b=Ot(e),R=y.useObserverValue(e.name),w=y.useObserverValue(e.tag),C=y.useObserverValue(e.id),{onDragStart:D,onDragEnd:S}=ve(),{hideInsertBar:g}=we(),{selectedId:L}=Oe(),{hoveredId:M}=Ce();xe({value:M,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,a.current)},[M,e]),xe({value:L,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,a.current)},[L,e]),f.useEffect(()=>{m(F=>M.value===C===F?F:!F);const I=M.subscribe(F=>{m(oe=>F===C===oe?oe:!oe)});return()=>I.unsubscribe()},[C,M]);const T=f.useMemo(()=>!p||p.length===0?null:p.map(I=>x.jsx(_e,{element:I,parents:[...r,e]},I.id.value)),[p,r,e]),k=f.useMemo(()=>p!==void 0,[p]),{isDragging:B,preview:N}=se.useDrag({id:C,element:a,data:{element:e,parents:r},start:()=>{D()},end:()=>{g(),S()}},[C,e,r,g,D,S]);f.useEffect(()=>{N(()=>Fe(R),I=>I.remove())},[N,R]);const $=f.useRef({id:ke()});return se.useDrop({element:a,id:$.current.id,drop:(I,F)=>u(I,F,e,r,a,$.current.id),hover:(I,F)=>s(I,F,e,r,a,$.current.id),leave:(I,F)=>o(I,F,e,r,a,$.current.id)},[e,r,u,s,o]),x.jsx(mt,{readOnly:!0,tag:w,ref:a,children:T,onMouseLeave:n,onClick:I=>i(I,e),onMouseOver:I=>t(I,e,a.current),...l!==void 0?{...l,...h?{disabled:!1}:{}}:{},style:{...b,resize:"none",cursor:"default",userSelect:"none",pointerEvents:"all",opacity:B?.5:typeof b.opacity=="number"?Number(b.opacity):void 0,minWidth:T===null&&k?40:typeof b.minWidth=="number"?Number(b.minWidth):void 0,minHeight:T===null&&k?40:typeof b.minHeight=="number"?Number(b.minHeight):void 0}})},Io=({element:e,parents:r})=>{const[t]=Ct(e),n=y.useObserverValue(e.children),i=Ot(e),o=y.useObserverValue(e.tag),s=f.useMemo(()=>!n||n.length===0?null:n.map(u=>x.jsx(_e,{element:u,parents:[...r,e]},u.id.value)),[n,r,e]);return x.jsx(mt,{tag:o,children:s,...t!==void 0?t:{},style:{...i,resize:"none",outline:"none",cursor:"default",userSelect:"none",pointerEvents:"none"}})},Vo=({element:e,parents:r,...t})=>Xe(e,r)?x.jsx(Io,{element:e,parents:r}):x.jsx(jo,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar}),Mo=(e,r)=>{const{components:t}=ve();return y.useSelectorValue(({get:n})=>{const i=n(t),o=[...r].reverse(),s=o.findIndex(v=>{var m;if(n(v.type)!=="component")return!1;const a=v;return n(e.componentId)===n(a.referenceComponentId)?(m=n(a.slots))==null?void 0:m.some(l=>n(l.referenceSlotId)===n(e.id)):!1});return!o.at(s)||o.slice(s+1).reduce((v,a)=>v!==void 0?v:n(a.type)==="slot-content"?!1:n(a.type)==="component"?!0:v,void 0)?!1:i.some(v=>n(v.id)===n(e.componentId))},[r,e,t])},wt=(e,r)=>{const{onAddSlotContent:t}=ve();return y.useSelectorValue(({get:n})=>{var s;const i=[...r].reverse().filter(u=>n(u.type)==="component").find(u=>n(u.referenceComponentId)===n(e.componentId));if(!i)return[];const o=(s=n(i.slots))==null?void 0:s.find(u=>n(u.referenceSlotId)===n(e.id));return o?[n(o.children),o]:(setTimeout(()=>t(e,i),0),[])},[r,e,t])},ko=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onDragLeave:i,onDragOver:o,onDrop:s,onHoverBar:u})=>{const d=f.useRef(null),[v=[],a]=wt(e,r),{hoveredId:h}=Ce();xe({value:h,matchWidthValue:a==null?void 0:a.id,effect(){a&&u(e,d.current)}},[h,a==null?void 0:a.id,e]);const m=f.useRef({id:ke()});return se.useDrop({element:d,id:m.current.id,drop:(l,p)=>a?s(l,p,a,r,d,m.current.id):void 0,hover:(l,p)=>a?o(l,p,a,r,d,m.current.id):void 0,leave:(l,p)=>a?i(l,p,a,r,d,m.current.id):void 0},[a,r,s,o,i]),x.jsxs("div",{ref:d,onMouseLeave:n,style:{cursor:"default",userSelect:"none",pointerEvents:"all",outline:"none"},onMouseOver:l=>a?t(l,a,d.current):void 0,children:[a&&v.length>0&&v.map(l=>x.jsx(_e,{element:l,parents:[...r,a]},l.id.value)),v.length===0&&x.jsx("div",{style:{opacity:.5,display:"flex",minWidth:"40px",minHeight:"40px",alignItems:"center",pointerEvents:"none",justifyContent:"center",fontFamily:"sans-serif",backgroundColor:"#80808020"},children:"Drag and drop something here..."})]})},Bo=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v})=>{const a=f.useRef(null),{onDragStart:h,onDragEnd:m}=ve(),{hideInsertBar:l}=we(),{selectedId:p}=Oe(),{hoveredId:b}=Ce(),R=y.useObserverValue(e.name),w=y.useObserverValue(e.id);xe({value:b,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,a.current)},[b,e]),xe({value:p,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,a.current)},[p,e]);const{isDragging:C,preview:D}=se.useDrag({id:w,element:a,data:{element:e,parents:r},start:()=>{h()},end:()=>{l(),m()}},[w,e,r,l,h,m]);f.useEffect(()=>{D(()=>Fe(R),g=>g.remove())},[D,R]);const S=f.useRef({id:ke()});return se.useDrop({element:a,id:S.current.id,drop:(g,L)=>u(g,L,e,r,a,S.current.id),hover:(g,L)=>s(g,L,e,r,a,S.current.id),leave:(g,L)=>o(g,L,e,r,a,S.current.id)},[e,r,u,s,o]),x.jsxs("div",{ref:a,onMouseLeave:n,onClick:g=>i(g,e),onMouseOver:g=>t(g,e,a.current),style:{display:"flex",minWidth:"40px",minHeight:"40px",cursor:"default",userSelect:"none",alignItems:"center",pointerEvents:"all",justifyContent:"center",fontFamily:"sans-serif",backgroundColor:"#8080803b",border:"2px dashed #8080803b",opacity:C?.5:void 0},children:['Slot "',R,'"']})},Lo=({element:e,parents:r})=>{const[t=[],n]=wt(e,r);return x.jsx("div",{style:{outline:"none"},children:n&&t.map(i=>x.jsx(_e,{element:i,parents:[...r,n]},i.id.value))})},Ao=({element:e,parents:r,...t})=>{const n=Xe(e,r);return Mo(e,r)?x.jsx(ko,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar}):n?x.jsx(Lo,{element:e,parents:r}):x.jsx(Bo,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar})},Ho=({element:e,parents:r,onMouseOver:t,onMouseLeave:n,onSelect:i,onDragLeave:o,onDragOver:s,onDrop:u,onHoverBar:d,onSelectBar:v})=>{const a=f.useRef(null),{window:h,document:m}=$e.useFrame(),[l,p]=y.useObserver(e.text),b=y.useObserverValue(e.name),R=y.useObserverValue(e.id),{onExpressionToValue:w,onValueToExpression:C}=ve(),{onDragStart:D,onDragEnd:S}=ve(),{hideInsertBar:g}=we(),{selectedId:L}=Oe(),{hoveredId:M}=Ce(),[T,k]=f.useState(!1);f.useEffect(()=>{!a.current||!T||(a.current.focus(),v(e,null))},[T,v]),xe({value:M,matchWidthValue:e==null?void 0:e.id,effect:()=>d(e,a.current)},[M,e]),xe({value:L,matchWidthValue:e==null?void 0:e.id,effect:()=>v(e,a.current)},[L,e]);const{isDragging:B,preview:N}=se.useDrag({id:R,canDrag:!T,element:a,data:{element:e,parents:r},start:()=>{D()},end:()=>{g(),S()}},[R,T,e,r,g,D,S]);f.useEffect(()=>{N(()=>Fe(b),V=>V.remove())},[N,b]);const $=f.useRef({id:ke()});se.useDrop({element:a,id:$.current.id,drop:(V,G)=>u(V,G,e,r,a,$.current.id),hover:(V,G)=>s(V,G,e,r,a,$.current.id),leave:(V,G)=>o(V,G,e,r,a,$.current.id)},[e,r,u,s,o]);const I=f.useCallback(V=>{if(!h||!m)return;const G=h.getSelection();if(!G)return;const ie=m.createRange(),O=V.currentTarget;ie.selectNodeContents(O),G.removeAllRanges(),G.addRange(ie)},[h,m]),F=f.useCallback(V=>{V.stopPropagation(),(V.code==="Escape"||V.code==="Enter"||V.code==="NumpadEnter")&&(V.currentTarget.blur(),v(e,V.currentTarget))},[v,e]),oe=f.useCallback(V=>{k(!1),p(String(C(V.currentTarget.innerText,"text","textContent",e))),v(e,V.currentTarget)},[v,C,e]),A=f.useMemo(()=>w(l,"text","textContent",e)??"",[l,w,e]);return x.jsx("span",{contentEditable:T,dangerouslySetInnerHTML:{__html:A},onBlur:oe,onFocus:I,onKeyDown:F,onDoubleClick:()=>k(!0),ref:a,onMouseLeave:n,onClick:V=>T?V.stopPropagation():i(V,e),onMouseOver:V=>T?V.stopPropagation():t(V,e,a.current),style:{resize:"none",cursor:"default",pointerEvents:"all",opacity:B?.5:void 0,borderRadius:T?4:void 0,boxShadow:T?"0 0 6px 2px orange":void 0}})},$o=({element:e})=>{const{onExpressionToValue:r}=ve(),t=y.useObserverValue(e.text);return f.useMemo(()=>r(t,"text","textContent",e),[t,r,e])},zo=({element:e,parents:r,...t})=>Xe(e,r)?x.jsx($o,{element:e,parents:r}):x.jsx(Ho,{element:e,parents:r,onDrop:t.onDrop,onDragOver:t.onDragOver,onDragLeave:t.onDragLeave,onSelect:t.onSelect,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onHoverBar:t.onHoverBar,onSelectBar:t.onSelectBar}),_e=({element:e,parents:r})=>{const t=y.useObserverValue(e.type),{showInsertBar:n,hideInsertBar:i}=we(),{select:o,updateSelectBar:s}=Oe(),{hover:u,updateHoverBar:d}=Ce(),{onDrop:v,value:a}=ve(),h=f.useCallback((D,S)=>{D.stopPropagation(),D.preventDefault(),o(S.id.value)},[o]),m=f.useCallback(D=>{D.stopPropagation(),D.preventDefault(),o(void 0),u(void 0)},[o,u]),l=f.useCallback((D,S)=>{D.stopPropagation(),u(S.id.value)},[u]),p=f.useCallback(D=>{D.stopPropagation(),u(void 0)},[u]),b=f.useCallback((D,S)=>{d(D,()=>({top:(S==null?void 0:S.offsetTop)||0,left:(S==null?void 0:S.offsetLeft)||0,width:(S==null?void 0:S.getBoundingClientRect().width)||0,height:(S==null?void 0:S.getBoundingClientRect().height)||0}))},[d]),R=f.useCallback((D,S)=>{s(D,r,()=>({top:(S==null?void 0:S.offsetTop)||0,left:(S==null?void 0:S.offsetLeft)||0,width:(S==null?void 0:S.getBoundingClientRect().width)||0,height:(S==null?void 0:S.getBoundingClientRect().height)||0}))},[s,r]),w=f.useCallback((D,S,g,L,M,T)=>{if(!qr(S,g,L,M,T))return u(void 0);u(g.id.value);const B=go(S,g,M);if(!B)return i();n({isVisible:!0,top:B.top,left:B.left,width:B.width,height:B.height,isHorizontal:B.isHorizontal})},[n,u,i]),C=f.useCallback((D,S,g,L,M,T)=>{var $,I,F,oe,A,V;if(!qr(S,g,L,M,T))return;const B=yo(S,g,M);if(!B)return;const N=B.isOverStart||B.isOverEnd;if(!(!N&&g.type.value==="component")){if(Object.keys(D).includes("id")){const G=D;if(N){const ie=L.slice(-1).at(0),O=(($=(ie?ie.children:a).value)==null?void 0:$.findIndex(P=>P.id.value===g.id.value))??-1;v({element:G.id,from:{position:-1,element:null},to:{element:ie||"root",position:B.isOverStart?O:O+1}})}else{const ie=((I=g.children.value)==null?void 0:I.length)||-1;v({element:G.id,from:{position:-1,element:null},to:{element:g,position:B.isOverStart?ie:ie+1}})}}else{const G=D,ie=(F=G.parents)==null?void 0:F.slice(-1).at(0),O=ie||"root";if(O!=="root"&&O.type.value==="component")return;const P=((oe=(O==="root"?a:O.children).value)==null?void 0:oe.findIndex(H=>H.id.value===G.element.id.value))??-1;if(N){const H=L.slice(-1).at(0),U=((A=(H?H.children:a).value)==null?void 0:A.findIndex(W=>W.id.value===g.id.value))??-1;v({element:G.element,from:{position:P,element:O},to:{element:H||"root",position:B.isOverStart?U:U+1}})}else{const H=((V=g.children.value)==null?void 0:V.length)||-1;v({element:G.element,from:{position:P,element:O},to:{element:g,position:B.isOverStart?H:H+1}})}o(G.element.id.value)}i()}},[o,v,i]);return t==="component"?x.jsx(_o,{parents:r,element:e,onDrop:C,onDragOver:w,onDragLeave:()=>{},onDoubleClick:m,onSelect:h,onMouseOver:l,onMouseLeave:p,onHoverBar:b,onSelectBar:R}):t==="slot"?x.jsx(Ao,{parents:r,element:e,onDrop:C,onDragOver:w,onDragLeave:()=>{},onSelect:h,onMouseOver:l,onMouseLeave:p,onHoverBar:b,onSelectBar:R}):t==="text"?x.jsx(zo,{parents:r,element:e,onDrop:C,onDragOver:w,onDragLeave:()=>{},onSelect:h,onMouseOver:l,onMouseLeave:p,onHoverBar:b,onSelectBar:R}):x.jsx(Vo,{parents:r,element:e,onDrop:C,onDragOver:w,onDragLeave:()=>{},onSelect:h,onMouseOver:l,onMouseLeave:p,onHoverBar:b,onSelectBar:R})},Fo=()=>{const e=f.useRef({id:ke()}),{value:r,styles:t,onDrop:n,onKeyDown:i}=ve(),{updateSelectBarScroll:o,select:s}=Oe(),{showInsertBar:u,hideInsertBar:d}=we(),{updateHoverBarScroll:v,hover:a}=Ce(),[h,m]=f.useState(null),l=y.useObserverValue(r),p=f.useCallback((S,g)=>{var L;if(d(),!!S)if(Object.keys(S).includes("id"))n({element:S.id,from:{position:-1,element:null},to:{element:"root",position:r.value.length}});else{const M=S,T=po(M.parents||[]),k=T||"root",B=((L=T==null?void 0:T.children.value)==null?void 0:L.findIndex(N=>N.id.value===M.element.id.value))??-1;n({element:M.element,from:{element:k,position:B},to:{element:"root",position:r.value.length}}),s(M.element.id.value)}},[r,s,d]),b=f.useCallback((S,g)=>{const L=h==null?void 0:h.lastElementChild;if(!L)return;const M=L.getBoundingClientRect();u({isVisible:!0,isHorizontal:!0,left:M.left,width:M.width,height:M.height,top:L?M.top+M.height:M.top})},[h==null?void 0:h.lastElementChild,u]),R=f.useCallback((S,g)=>{o(S,g),v(S,g)},[o,v]),w=f.useCallback(S=>{S.stopPropagation(),s(void 0)},[s]),[{isDraggingOver:C,isDraggingOverCurrent:D}]=se.useDrop({drop:p,hover:b,id:e.current.id,element:{current:h},leave:()=>{d(),a(void 0)}},[p,b,d]);return x.jsx(wo,{styles:t,resetBody:!0,draggingHover:C||D,children:x.jsxs(mo,{onClick:w,onKeyDown:i,onScroll:R,onRef:m,children:[x.jsx(eo,{}),x.jsx(Co,{}),x.jsx(xo,{}),l.map(S=>x.jsx(_e,{parents:[],element:S},S.id.value)),l.length===0&&x.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:24,padding:24,backgroundColor:"lightgray",borderRadius:8,outline:"none"},children:x.jsx("span",{style:{fontFamily:"sans-serif",fontSize:14,opacity:.5,userSelect:"none",outline:"none"},children:"Drag and drop here to start"})})]})})};function Wo({onSelect:e,onHover:r,selectedId:t,hoveredId:n,...i}){return x.jsx(se.DragAndDropProvider,{children:x.jsx(Zn,{...i,children:x.jsx(Qn,{children:x.jsx(ro,{id:t,onSelect:e,children:x.jsx(So,{id:n,onHover:r,children:x.jsx(Fo,{})})})})})})}exports.UIEditor=Wo;exports.UiOverview=Xn;
//# sourceMappingURL=index.cjs.js.map
